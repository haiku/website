<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The Be Book - Classes And Methods - The Application Kit</title><link rel="stylesheet" href="be_book.css" type="text/css" media="all" /><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="./images/favicon.ico" /><!--[if IE]>
    <link rel="stylesheet" type="text/css" href="be_book_ie.css" />
    <![endif]--><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><meta name="keywords" content="Access, BeOS, BeBook, API" /><link rel="start" href="index.html" title="The Be Book" /><link rel="up" href="TheApplicationKit.html" title="The Application Kit" /><link rel="prev" href="BLooper.html" title="BLooper" /><link rel="next" href="BMessageFilter.html" title="BMessageFilter" /></head><body><div id="header"><div id="headerT"><div id="headerTL"><a accesskey="p" href="BLooper.html" title="BLooper"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a accesskey="u" href="TheApplicationKit.html" title="The Application Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a accesskey="n" href="BMessageFilter.html" title="BMessageFilter"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="headerTR"><div id="navigpeople"><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div><div class="navigboxed" id="navigindex"><a accesskey="i" href="ClassIndex.html" title="Index">I</a></div><div class="navigboxed" id="naviglang" title="English">en</div></div><div id="headerTC">The Be Book - Classes And Methods - The Application Kit</div></div><div id="headerB">Prev: <a href="BLooper.html">BLooper</a>  Up: <a href="TheApplicationKit.html">The Application Kit</a>  Next: <a href="BMessageFilter.html">BMessageFilter</a></div><hr /></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage"></a>BMessage</h2></div></div></div><a id="id697941" class="indexterm"></a><div class="classheader"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>Derived From:</td><td>–</td></tr><tr><td>Mix-in Classes:</td><td>–</td></tr><tr><td>Declared In:</td><td><code class="filename">app/Message.h</code></td></tr><tr><td>Library:</td><td><code class="filename">libbe.so</code></td></tr><tr><td>Allocation</td><td>new, static, or automatic</td></tr></tbody></table></td><td>
<a class="link overview" href="BMessage_Overview.html" title="BMessage">Class Overview</a>
<div class="toc"><ul><li><span class="section"><a href="BMessage.html#BMessage_DataMembers">Data Members</a></span></li><li><span class="section"><a href="BMessage.html#BMessage_ConstructorDestructor">Constructor and Destructor</a></span></li><li><span class="section"><a href="BMessage.html#BMessage_MemberFunctions">Member Functions</a></span></li><li><span class="section"><a href="BMessage.html#BMessage_Operators">Operators</a></span></li><li><span class="section"><a href="BMessage.html#BMessage_Constants">Constants</a></span></li></ul></div>
</td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_DataMembers"></a>Data Members</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_what"></a>what</h4></div></div></div><code class="fieldsynopsis"><span class="modifier">public </span><span class="type">uint32 </span><span class="varname">what </span>;</code><p>
A coded constant that captures what the message is about.
</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_ConstructorDestructor"></a>Constructor and Destructor</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_Constructor"></a>BMessage()</h4></div></div></div><div class="synopsisgroup">
<code class="constructorsynopsis cpp"><span class="methodname">BMessage</span>(<span class="methodparam"><span class="type">uint32 </span><span class="parameter">command</span></span>);</code>

<code class="constructorsynopsis cpp"><span class="methodname">BMessage</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">BMessage&amp; </span><span class="parameter">message</span></span>);</code>

<code class="constructorsynopsis cpp"><span class="methodname">BMessage</span>();</code>
</div><p>
Creates a new <code class="classname">BMessage</code> object that has the given
<code class="parameter">command</code> constant, or that's a copy of another
<code class="classname">BMessage</code>. If it's a copy, the new object contains
the same command constant and data fields as <code class="parameter">message</code>.
</p><p>
See also:
<a class="link" href="BLooper.html#BLooper_DetachCurrentMessage"><code class="methodname">BLooper::DetachCurrentMessage()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_Destructor"></a>~BMessage()</h4></div></div></div><code class="destructorsynopsis cpp"><span class="modifier">virtual </span><span class="methodname">~BMessage</span>();</code><p>
Frees all memory allocated to hold message data. If the message sender is
expecting a reply but hasn't received one, a default reply (with
<code class="constant">B_NO_REPLY</code> as the <code class="varname">what</code> data member)
is sent before the message is destroyed.
</p><p>
The system retains ownership of the messages it delivers to you. Each
message loop routinely deletes delivered <code class="classname">BMessage</code>s
after the application is finished responding to them.
</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_MemberFunctions"></a>Member Functions</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_AddData"></a><a id="BMessage_AddBool"></a>
<a id="BMessage_AddInt8"></a>
<a id="BMessage_AddInt16"></a>
<a id="BMessage_AddInt32"></a>
<a id="BMessage_AddInt64"></a>
<a id="BMessage_AddFloat"></a>
<a id="BMessage_AddDouble"></a>
<a id="BMessage_AddString"></a>
<a id="BMessage_AddPoint"></a>
<a id="BMessage_AddRect"></a>
<a id="BMessage_AddRef"></a>
<a id="BMessage_AddMessage"></a>
<a id="BMessage_AddMessenger"></a>
<a id="BMessage_AddPointer"></a>
<a id="BMessage_AddFlat"></a>
AddData(), AddBool(), AddInt8(), AddInt16(), AddInt32(), AddInt64(),
AddFloat(), AddDouble(), AddString(), AddPoint(), AddRect(), AddRef(),
AddMessage(), AddMessenger(), AddPointer(), AddFlat()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddData</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                 <span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                 <span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">data</span></span>,<br />                 <span class="methodparam"><span class="type">ssize_t </span><span class="parameter">numBytes</span></span>,<br />                 <span class="methodparam"><span class="type">bool </span><span class="parameter">fixedSize</span><span class="initializer"> = <span class="constant">true</span></span></span>,<br />                 <span class="methodparam"><span class="type">int32 </span><span class="parameter">numItems</span><span class="initializer"> = 1</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddBool</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                 <span class="methodparam"><span class="type">bool </span><span class="parameter">aBool</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddInt8</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                 <span class="methodparam"><span class="type">int8 </span><span class="parameter">anInt8</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddInt16</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">int16 </span><span class="parameter">anInt16</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddInt32</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">int32 </span><span class="parameter">anInt32</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddInt64</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">int64 </span><span class="parameter">anInt64</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddFloat</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">float </span><span class="parameter">aFloat</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddDouble</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="type">double </span><span class="parameter">aDouble</span></span>);</code><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddString</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">string</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddString</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="modifier">const </span><span class="type">BString </span><span class="parameter">string</span></span>);</code>
</div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddPoint</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">BPoint </span><span class="parameter">point</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddRect</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                 <span class="methodparam"><span class="type">BRect </span><span class="parameter">rect</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddRef</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                <span class="methodparam"><span class="modifier">const </span><span class="type">entry_ref* </span><span class="parameter">ref</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddMessage</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="modifier">const </span><span class="type">BMessage* </span><span class="parameter">message</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddMessenger</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                      <span class="methodparam"><span class="type">BMessenger </span><span class="parameter">messenger</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddPointer</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">pointer</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddFlat</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                 <span class="methodparam"><span class="type">BFlattenable* </span><span class="parameter">object</span></span>,<br />                 <span class="methodparam"><span class="type">int32 </span><span class="parameter">numItems</span><span class="initializer"> = 1</span></span>);</code><p>
These functions add data to the field named <code class="parameter">name</code>
and assign a data type to the field. Field names can be no longer than
255 characters. If more than one item of data is added under the same
name, the <code class="classname">BMessage</code> creates an array of data for
that name. Each time you add another value (to the same name), the
value is added to the end of the array—you can't add a value at a
specific index. A given field can only store one type of data.
</p><p>
<code class="methodname">AddData()</code> copies <code class="parameter">numBytes</code>
of <code class="parameter">data</code> into the field, and assigns the data a
<code class="parameter">type</code> code. It copies whatever the
<code class="parameter">data</code> pointer points to. For example, if you want
to add a string of characters to the message, <code class="parameter">data</code>
should be the string pointer (<span class="type">char *</span>). If you want to add
only the string pointer, not the characters themselves,
<code class="parameter">data</code> should be a pointer to the pointer
(<span class="type">char **</span>). The assigned <code class="parameter">type</code> must
be a specific data type; it should not be <code class="constant">B_ANY_TYPE</code>.
</p><p>
When you call <code class="methodname">AddData()</code> to place the first item
in an array under a new name, you can provide it with two arguments,
<code class="parameter">fixedSize</code> and <code class="parameter">numItems</code>,
that will improve the object's efficiency. If the
<code class="parameter">fixedSize</code> flag is <code class="constant">true</code>, each
item in the array must have the same number of bytes; if the flag is
<code class="constant">false</code>, items can vary in size.
<code class="parameter">numItems</code> tells the object to pre-allocate storage
for some number of items. This isn't a limit, you can add more than
<code class="parameter">numItems</code> to the field.
</p><p>
Most of the other functions are variants of
<code class="methodname">AddData()</code> that hard-code the field's type. For
example, <code class="methodname">AddFloat()</code> assigns the type
<code class="constant">B_FLOAT_TYPE</code>; <code class="methodname">AddBool()</code>
assigns <code class="constant">B_BOOL_TYPE</code>, and so on.
</p><p>
<code class="methodname">AddString()</code>, like
<code class="methodname">AddData()</code>, takes a pointer to the data it
adds, or you can use a
<a class="link" href="BString.html" title="BString"><code class="classname">BString</code></a> object.
The <code class="parameter">string</code> must be null-terminated; the null
character is counted and copied into the message. Similarly,
<code class="methodname">AddRef()</code> adds the pointed to
<span class="type">entry_ref</span> structure to the message (and the variable-length
name that's one of the elements of the structure);
<code class="methodname">AddMessage()</code> adds one
<code class="classname">BMessage</code> to another.
</p><p>
The other functions are simply passed the data directly. For example,
<code class="methodname">AddInt32()</code> takes an <span class="type">int32</span> or
<span class="type">uint32</span> and <code class="methodname">AddMessenger()</code> takes
a <a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a>
object, whereas <code class="methodname">AddData()</code> would be passed a
pointer to an <span class="type">int32</span> and a pointer to a
<a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a>.
<code class="methodname">AddPointer()</code> adds only the pointer it's passed,
not the data it points to. To accomplish the same thing,
<code class="methodname">AddData()</code> would take a pointer to the pointer.
(The pointer will be valid only locally; it won't be useful to a remote
destination.)
</p><p>
<code class="methodname">AddFlat()</code> flattens an <code class="parameter">object</code>
(by calling its <code class="methodname">Flatten()</code> function) and adds
the flat data to the message. It calls the object's
<a class="link" href="BFlattenable.html#BFlattenable_TypeCode" title="TypeCode() , AllowsTypeCode()"><code class="methodname">TypeCode()</code></a>
function to learn the type code it should associate with the data.
Objects that are added through <code class="methodname">AddFlat()</code> must
inherit from
<a class="link" href="BFlattenable.html" title="BFlattenable"><code class="classname">BFlattenable</code></a>
(defined in the <a class="link" href="TheSupportKit.html" title="The Support Kit">Support Kit</a>).
</p><p>
You can also provide a <code class="parameter">numItems</code> hint to
<code class="methodname">AddFlat()</code> when you call it to set up a new
array. <code class="methodname">AddFlat()</code> calls the object's
<a class="link" href="BFlattenable.html#BFlattenable_IsFixedSize" title="IsFixedSize()"><code class="methodname">IsFixedSize()</code></a>
function to discover whether all items in the array will be the same size.
</p><p>
These functions return <code class="constant">B_ERROR</code> if the data is
too massive to be added to the message, <code class="constant">B_BAD_TYPE</code>
if the data can't be added to an existing array because it's the wrong
type, <code class="constant">B_NO_MEMORY</code> if the
<code class="classname">BMessage</code> can't get enough memory to hold the data,
and <code class="constant">B_BAD_VALUE</code> if the proposed <code class="parameter">name</code>
for the data is longer than 255 bytes. If all goes well, they return
<code class="constant">B_OK</code>.
</p><p>
There's no limit on the number of named fields a message can contain
or on the size of a field's data. However, since the search is linear,
combing through a very long list of names to find a particular piece
of data may be inefficient. Also, because of the amount of data that
must be moved, an extremely large message can slow the delivery
mechanism. It's sometimes better to put some of the information in a
common location (a file, a private clipboard, a shared area of memory)
and just refer to it in the message.
</p><p>
See also: <a class="link" href="BMessage.html#BMessage_FindData" title="FindData(), FindBool(), FintInt8(), FindInt16(), FindInt32(), FindInt64(), FindFloat(), FindDouble(), FindString(), FindPoint(), FindRect(), FindRef(), FindMessage(), FindMessenger(), FindPointer(), FindFlat()"><code class="methodname">FindData()</code></a>,
<a class="link" href="BMessage.html#BMessage_GetInfo" title="GetInfo()"><code class="methodname">GetInfo()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_AddSpecifier"></a>AddSpecifier()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddSpecifier</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">BMessage* </span><span class="parameter">message</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddSpecifier</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">property</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddSpecifier</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">property</span></span>,<br />                      <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddSpecifier</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">property</span></span>,<br />                      <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                      <span class="methodparam"><span class="type">int32 </span><span class="parameter">range</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">AddSpecifier</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">property</span></span>,<br />                      <span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>);</code>
</div><p>
Adds a specifier to the specifier stack. There are several variations of
this method. The first adds the specifier <code class="parameter">message</code> to
the specifier stack. The other methods add a specifier targeting the
property <code class="parameter">property</code>, with specifier constants
<code class="constant">B_DIRECT_SPECIFIER</code>,
<code class="constant">B_INDEX_SPECIFIER</code>,
<code class="constant">B_RANGE_SPECIFIER</code>, and
<code class="constant">B_NAME_SPECIFIER</code>, respectively. For all other
specifiers, you must construct the specifier separately and then call
<code class="methodname">AddSpecifier()</code> on the message. For more
information about specifiers, see the "Scripting" section near
the beginning of this chapter.
</p><p>
Specifiers are stored in a data array named "specifiers".
However, since <code class="methodname">AddSpecifier()</code> also sets the notion
of the current specifier, specifiers should always be added to a scripting
message with this method rather than with <a class="link" href="BMessage.html#BMessage_AddData" title="AddData(), AddBool(), AddInt8(), AddInt16(), AddInt32(), AddInt64(), AddFloat(), AddDouble(), AddString(), AddPoint(), AddRect(), AddRef(), AddMessage(), AddMessenger(), AddPointer(), AddFlat()"><code class="methodname">AddMessage()</code></a>.
</p><p>
<code class="methodname">AddSpecifier()</code> returns <code class="constant">B_OK</code>
if it's able to add the specifier to the <code class="classname">BMessage</code>
and an error code, generally only <code class="constant">B_NO_MEMORY</code> to
indicate that it has run out of memory, if not.
</p><p>
See also: <a class="link" href="BMessage.html#BMessage_GetCurrentSpecifier" title="GetCurrentSpecifier(), PopSpecifier()"><code class="methodname">GetCurrentSpecifier()</code></a>,
<a class="link" href="BMessage.html#BMessage_HasSpecifiers" title="HasSpecifiers()"><code class="methodname">HasSpecifiers()</code></a>,
<a class="link" href="BMessage.html#BMessage_PopSpecifier"><code class="methodname">PopSpecifier()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_CountNames"></a>CountNames()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">int32 </span><span class="methodname">CountNames</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>) <span class="modifier">const</span>;</code><p>
Returns the number of named data fields in the
<code class="classname">BMessage</code> that store data of the specified
<code class="parameter">type</code>. An array of information held under a single
name counts as one field; each name is counted only once, no matter how
many data items are stored under that name.
</p><p>
If <code class="parameter">type</code> is <code class="constant">B_ANY_TYPE</code>, this
function counts all named fields. If <code class="parameter">type</code> is a
specific type, it counts only fields that store data registered as that
type.
</p><p>
See also: <a class="link" href="BMessage.html#BMessage_GetInfo" title="GetInfo()"><code class="methodname">GetInfo()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_FindData"></a><a id="BMessage_FindBool"></a>
<a id="BMessage_FindInt8"></a>
<a id="BMessage_FindInt16"></a>
<a id="BMessage_FindInt32"></a>
<a id="BMessage_FindInt64"></a>
<a id="BMessage_FindFloat"></a>
<a id="BMessage_FindDouble"></a>
<a id="BMessage_FindString"></a>
<a id="BMessage_FindPoint"></a>
<a id="BMessage_FindRect"></a>
<a id="BMessage_FindRef"></a>
<a id="BMessage_FindMessage"></a>
<a id="BMessage_FindMessenger"></a>
<a id="BMessage_FindPointer"></a>
<a id="BMessage_FindFlat"></a>
FindData(), FindBool(), FintInt8(), FindInt16(), FindInt32(),
FindInt64(), FindFloat(), FindDouble(), FindString(), FindPoint(),
FindRect(), FindRef(), FindMessage(), FindMessenger(), FindPointer(),
FindFlat()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindData</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                  <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                  <span class="methodparam"><span class="modifier">const </span><span class="type">void** </span><span class="parameter">data</span></span>,<br />                  <span class="methodparam"><span class="type">ssize_t* </span><span class="parameter">numBytes</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindData</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                  <span class="methodparam"><span class="modifier">const </span><span class="type">void** </span><span class="parameter">data</span></span>,<br />                  <span class="methodparam"><span class="type">ssize_t* </span><span class="parameter">numBytes</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindBool</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                  <span class="methodparam"><span class="type">bool* </span><span class="parameter">aBool</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindBool</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">bool* </span><span class="parameter">aBool</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindInt8</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                  <span class="methodparam"><span class="type">int8* </span><span class="parameter">anInt8</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindInt8</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">int8* </span><span class="parameter">anInt8</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindInt16</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                   <span class="methodparam"><span class="type">int16* </span><span class="parameter">anInt16</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindInt16</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="type">int16* </span><span class="parameter">anInt16</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindInt32</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                   <span class="methodparam"><span class="type">int32* </span><span class="parameter">anInt32</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindInt32</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="type">int32* </span><span class="parameter">anInt32</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindInt64</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                   <span class="methodparam"><span class="type">int64* </span><span class="parameter">anInt64</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindInt64</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="type">int64* </span><span class="parameter">anInt64</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindFloat</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                   <span class="methodparam"><span class="type">float* </span><span class="parameter">aFloat</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindFloat</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="type">float* </span><span class="parameter">aFloat</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindDouble</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                    <span class="methodparam"><span class="type">double* </span><span class="parameter">aDouble</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindDouble</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="type">double* </span><span class="parameter">aDouble</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindString</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                    <span class="methodparam"><span class="modifier">const </span><span class="type">char** </span><span class="parameter">string</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindString</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="modifier">const </span><span class="type">char** </span><span class="parameter">string</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindString</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                    <span class="methodparam"><span class="type">BString* </span><span class="parameter">string</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindString</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="type">BString* </span><span class="parameter">string</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindPoint</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                   <span class="methodparam"><span class="type">BPoint* </span><span class="parameter">point</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindPoint</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                   <span class="methodparam"><span class="type">BPoint* </span><span class="parameter">point</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindRect</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                  <span class="methodparam"><span class="type">BRect* </span><span class="parameter">rect</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindRect</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">BRect* </span><span class="parameter">rect</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindRef</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                 <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                 <span class="methodparam"><span class="type">entry_ref* </span><span class="parameter">ref</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindRef</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                 <span class="methodparam"><span class="type">entry_ref* </span><span class="parameter">ref</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindMessage</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                     <span class="methodparam"><span class="type">BMessage* </span><span class="parameter">message</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindMessage</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">BMessage* </span><span class="parameter">message</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindMessenger</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                       <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                       <span class="methodparam"><span class="type">BMessenger* </span><span class="parameter">messenger</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindMessenger</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                       <span class="methodparam"><span class="type">BMessenger* </span><span class="parameter">messenger</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindPointer</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                     <span class="methodparam"><span class="type">void** </span><span class="parameter">pointer</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindPointer</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">void** </span><span class="parameter">pointer</span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindFlat</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                  <span class="methodparam"><span class="type">BFlattenable* </span><span class="parameter">object</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">FindFlat</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">BFlattenable* </span><span class="parameter">object</span></span>) <span class="modifier">const</span>;</code>
</div><p>
These functions retrieve data from the <code class="classname">BMessage</code>.
Each looks for data stored under the specified <code class="parameter">name</code>.
If more than one data item has the same name, an
<code class="parameter">index</code> can be provided to tell the function which
item in the <code class="parameter">name</code> array it should find. Indices begin
at 0. If an <code class="parameter">index</code> isn't provided, the function will
find the first, or only, item in the array.
</p><div class="admonition important"><div class="title">Important</div><div class="graphic"><img class="icon" alt="Important" width="32" src="./images/admonitions/Warning_32.png" /><div class="text"><p>In all cases except <code class="methodname">FindData()</code> and
<code class="methodname">FindString()</code>, the data that's retrieved from the
<code class="classname">BMessage</code> is copied into the reference argument; the
caller is responsible for freeing the copied data. For
<code class="methodname">FindData()</code> and the non-<a class="link" href="BString.html" title="BString"><code class="classname">BString</code></a> version of
<code class="methodname">FindString()</code>, a pointer to the data is returned;
the <code class="classname">BMessage</code> retains ownership of the actual data
and will delete the data when the object itself is deleted.</p></div></div></div><p>
<code class="methodname">FindData()</code> places, in <code class="parameter">*data</code>,
a pointer to the requested data item. The size of the item in bytes is written
to <code class="parameter">numBytes</code>. If <code class="parameter">type</code> is
<code class="constant">B_ANY_TYPE</code>, it provides a pointer to the data no
matter what type it actually is. But if <code class="parameter">type</code> is a
specific data type, it provides the pointer only if the
<code class="parameter">name</code> field holds data of that particular type.
</p><p>
The other functions are specialized versions of
<code class="methodname">FindData()</code>. They match the corresponding <a class="link" href="BMessage.html#BMessage_AddData" title="AddData(), AddBool(), AddInt8(), AddInt16(), AddInt32(), AddInt64(), AddFloat(), AddDouble(), AddString(), AddPoint(), AddRect(), AddRef(), AddMessage(), AddMessenger(), AddPointer(), AddFlat()">Add…()</a> methods and search for named
data of a particular type, as described below:
</p><div class="informaltable"><table border="1"><colgroup><col /><col /><col /></colgroup><thead><tr><th>Function</th><th>Finds data</th><th>Registered as type</th></tr></thead><tbody><tr><td><code class="methodname">FindBool()</code></td><td>a <span class="type">bool</span></td><td><code class="constant">B_BOOL_TYPE</code></td></tr><tr><td><code class="methodname">FindInt8()</code></td><td>an <span class="type">int8</span> or <span class="type">uint8</span></td><td><code class="constant">B_INT8_TYPE</code></td></tr><tr><td><code class="methodname">FindInt16()</code></td><td>an <span class="type">int16</span> or <span class="type">uint16</span></td><td><code class="constant">B_INT16_TYPE</code></td></tr><tr><td><code class="methodname">FindInt32()</code></td><td>an <span class="type">int32</span> or <span class="type">uint32</span></td><td><code class="constant">B_INT32_TYPE</code></td></tr><tr><td><code class="methodname">FindInt64()</code></td><td>an <span class="type">int64</span> or <span class="type">uint64</span></td><td><code class="constant">B_INT64_TYPE</code></td></tr><tr><td><code class="methodname">FindFloat()</code></td><td>a <span class="type">float</span></td><td><code class="constant">B_FLOAT_TYPE</code></td></tr><tr><td><code class="methodname">FindDouble()</code></td><td>a <span class="type">double</span></td><td><code class="constant">B_DOUBLE_TYPE</code></td></tr><tr><td><code class="methodname">FindString()</code></td><td>a character string</td><td><code class="constant">B_STRING_TYPE</code></td></tr><tr><td><code class="methodname">FindPoint()</code></td><td>a <a class="link" href="BPoint.html" title="BPoint"><code class="classname">BPoint</code></a> object</td><td><code class="constant">B_POINT_TYPE</code></td></tr><tr><td><code class="methodname">FindRect()</code></td><td>a <a class="link" href="BRect.html" title="BRect"><code class="classname">BRect</code></a> object</td><td><code class="constant">B_RECT_TYPE</code></td></tr><tr><td><code class="methodname">FindRef()</code></td><td>an <span class="type">entry_ref</span></td><td><code class="constant">B_REF_TYPE</code></td></tr><tr><td><code class="methodname">FindMessage()</code></td><td>a <code class="classname">BMessage</code> object</td><td><code class="constant">B_MESSAGE_TYPE</code></td></tr><tr><td><code class="methodname">FindMessenger()</code></td><td>a <a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a> object</td><td><code class="constant">B_MESSENGER_TYPE</code></td></tr><tr><td><code class="methodname">FindPointer()</code></td><td>a pointer to anything</td><td><code class="constant">B_POINTER_TYPE</code></td></tr></tbody></table></div><p>
The other type-specific functions retrieve the requested data item from the
message by copying it to the variable referred to by the last argument; you
get the data, not just a pointer to it. For example,
<code class="methodname">FindMessenger()</code> assigns the <a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a> it finds in
the message to the <code class="parameter">messenger</code> object, whereas
<code class="methodname">FindData()</code> would provide only a pointer to a <a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a>.
<code class="methodname">FindPointer()</code> puts the found pointer in the
<span class="type">void*</span> variable that <code class="parameter">pointer</code> refers to;
<code class="methodname">FindData()</code>, as illustrated above, would provide a
pointer to the pointer. (If the message was delivered from a remote source,
pointers retrieved from the message won't be valid.)
</p><p>
<code class="methodname">FindRef()</code> retrieves an <span class="type">entry_ref</span>
structure; the data that's used to reconstitute the structure may have been
added as an <span class="type">entry_ref</span> (through
<code class="methodname">AddRef()</code>), or as a flattened <a class="link" href="BPath.html" title="BPath"><code class="classname">BPath</code></a> object
(<code class="methodname">AddFlat()</code>).
</p><p>
<code class="methodname">FindFlat()</code> assigns the object stored in the
<code class="classname">BMessage</code> to the <code class="parameter">object</code> passed
as an argument, it calls the <code class="parameter">object</code>'s <a class="link" href="BMessage.html#BMessage_Unflatten"><code class="methodname">Unflatten()</code></a>
function and passes it the flat data from the message, provided that the
two objects have compatible types. The argument object's
<code class="methodname">AllowsTypeCode()</code> function must return
<code class="constant">true</code> when tested with the type code stored in the
message; if not, <code class="methodname">FindFlat()</code> fails and returns
<code class="constant">B_BAD_VALUE</code>.
</p><p>
If these functions can't find any data associated with
<code class="parameter">name</code>, they return a
<code class="constant">B_NAME_NOT_FOUND</code> error. If they can't find
<code class="parameter">name</code> data of the requested
<code class="parameter">type</code> (or the type the function returns), they return
<code class="constant">B_BAD_TYPE</code>. If the <code class="parameter">index</code> is out
of range, they return <code class="constant">B_BAD_INDEX</code>. You can rely on the
values they retrieve only if they return <code class="constant">B_OK</code> and the
data was correctly recorded when it was added to the message.
</p><p>
When they fail, <code class="methodname">FindData()</code> and
<code class="methodname">FindString()</code> provide <code class="constant">NULL</code>
pointers. <code class="methodname">FindRect()</code> hands you an invalid
rectangle and <code class="methodname">FindMessenger()</code> an invalid <a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a>. Most of the
other functions set the data values to 0, which may be indistinguishable
from valid values.
</p><p>
Finding a data item doesn't remove it from the <code class="classname">BMessage</code>.
</p><p>
(Several functions, such as <code class="methodname">FindRect()</code> and
<code class="methodname">FindInt32()</code>, have versions that return the found
value directly. These versions don't report errors and may not be supported
in the future.)
</p><p>
See also: <a class="link" href="BMessage.html#BMessage_GetInfo" title="GetInfo()"><code class="methodname">GetInfo()</code></a>, <a class="link" href="BMessage.html#BMessage_AddData" title="AddData(), AddBool(), AddInt8(), AddInt16(), AddInt32(), AddInt64(), AddFloat(), AddDouble(), AddString(), AddPoint(), AddRect(), AddRef(), AddMessage(), AddMessenger(), AddPointer(), AddFlat()"><code class="methodname">AddData()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_Flatten"></a><a id="BMessage_Unflatten"></a>
<a id="BMessage_FlattenedSize"></a>
Flatten(), Unflatten(), FlattenedSize()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">Flatten</span>(<span class="methodparam"><span class="type">BDataIO* </span><span class="parameter">object</span></span>,<br />                 <span class="methodparam"><span class="type">ssize_t* </span><span class="parameter">numBytes</span><span class="initializer"> = <span class="constant">NULL</span></span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">Flatten</span>(<span class="methodparam"><span class="type">char* </span><span class="parameter">address</span></span>,<br />                 <span class="methodparam"><span class="type">ssize_t </span><span class="parameter">numBytes</span><span class="initializer"> = <span class="constant">NULL</span></span></span>) <span class="modifier">const</span>;</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">Unflatten</span>(<span class="methodparam"><span class="type">BDataIO* </span><span class="parameter">object</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">Unflatten</span>(<span class="methodparam"><span class="type">const char* </span><span class="parameter">address</span></span>);</code>
</div><code class="methodsynopsis cpp"><span class="type">ssize_t </span><span class="methodname">FlattenedSize</span>() <span class="modifier">const</span>;</code><p>
These functions write the <code class="classname">BMessage</code> and the data it
contains to a "flat" (untyped) buffer of bytes, and reconstruct a
<code class="classname">BMessage</code> object from such a buffer.
</p><p>
If passed a <a class="link" href="BDataIO.html" title="BDataIO"><code class="classname">BDataIO</code></a>
<code class="parameter">object</code> (including a <a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>),
<code class="methodname">Flatten()</code> calls the object's
<code class="methodname">Write()</code> function to write the message data. If
passed the <code class="parameter">address</code> of a buffer, it begins writing at
the start of the buffer. <code class="methodname">FlattenedSize()</code> returns
the number of bytes you must provide in the buffer to hold the flattened
object. <code class="methodname">Flatten()</code> places the number of bytes
actually written in the variable that its <code class="parameter">numBytes</code>
argument refers to.
</p><p>
<code class="methodname">Unflatten()</code> empties the
<code class="classname">BMessage</code> of any information it may happen to
contain, then initializes the object from data read from the buffer. If
passed a <a class="link" href="BDataIO.html" title="BDataIO"><code class="classname">BDataIO</code></a>
<code class="parameter">object</code>, it calls the object's
<code class="methodname">Read()</code> function to read the message data. If
passed a buffer <code class="parameter">address</code>, it begins reading at the
start of the buffer. It's up to the caller to make sure that
<code class="methodname">Unflatten()</code> reads data that
<code class="methodname">Flatten()</code> wrote and that pointers are positioned
correctly.
</p><p>
<code class="methodname">Flatten()</code> returns any errors encountered when
writing the data, or <code class="constant">B_OK</code> if there is no error.
</p><p>
If it doesn't recognize the data in the buffer as being a flattened object
or there's a failure in reading the data,
<code class="methodname">Unflatten()</code> returns
<code class="constant">B_BAD_VALUE</code>. If it doesn't have adequate memory to
recreate the whole message, it returns <code class="constant">B_NO_MEMORY</code>.
Otherwise, it returns <code class="constant">B_OK</code>.
</p><p>
See also: the <a class="link" href="BDataIO.html" title="BDataIO"><code class="classname">BDataIO</code></a>
class in the <a class="link" href="TheSupportKit.html" title="The Support Kit">Support Kit</a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_GetCurrentSpecifier"></a><a id="BMessage_PopSpecifier"></a>
GetCurrentSpecifier(), PopSpecifier()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">GetCurrentSpecifier</span>(<span class="methodparam"><span class="type">int32* </span><span class="parameter">index</span></span>,<br />                             <span class="methodparam"><span class="type">BMessage* </span><span class="parameter">specifier</span><span class="initializer"> = <span class="constant">NULL</span></span></span>,<br />                             <span class="methodparam"><span class="type">int32* </span><span class="parameter">what</span><span class="initializer"> = <span class="constant">NULL</span></span></span>,<br />                             <span class="methodparam"><span class="modifier">const </span><span class="type">char** </span><span class="parameter">property</span><span class="initializer"> = <span class="constant">NULL</span></span></span>) <span class="modifier">const</span>;</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">PopSpecifier</span>();</code><p>
<code class="methodname">GetCurrentSpecifier()</code> unpacks the current
specifier in the <code class="classname">BMessage</code>, the one at the top of the
specifier stack; <code class="methodname">PopSpecifier()</code> changes the notion
of which specifier is current, by popping the current one from the stack.
</p><p>
These functions aid in implementing a class-specific version of <a class="link" href="BHandler.html" title="BHandler"><code class="classname">BHandler</code></a>'s <a class="link" href="BHandler.html#BHandler_ResolveSpecifier" title="ResolveSpecifier()"><code class="methodname">ResolveSpecifier()</code></a>
function—the first gets the specifier that needs to be resolved,
and the second pops it from the stack after it is resolved. You can also
call them to examine relevant specifiers when handling a message that
targets an object property (such as <code class="constant">B_GET_PROPERTY</code>).
</p><p>
A scripting <code class="classname">BMessage</code> keeps specifiers in a data
array named "specifiers"; each specifier is itself a
<code class="classname">BMessage</code>, but one with a special structure and
purpose in the scripting system. See the "Scripting" section near
the beginning of this chapter for an overview of the system and the place
of specifiers in it.
</p><p>
The specifiers in a message are ordered and, until
<code class="methodname">PopSpecifier()</code> is called, the one that was added
last, the one with the greatest index, is the current specifier.
<code class="methodname">PopSpecifier()</code> merely decrements the index that
picks the current specifier; it doesn't delete anything from the
<code class="classname">BMessage</code>.
</p><p>
<code class="methodname">GetCurrentSpecifier()</code> puts the index of the
current specifier in the variable that its first argument,
<code class="parameter">index</code>, refers to. If other arguments are provided,
it makes the <code class="parameter">specifier</code>
<code class="classname">BMessage</code> a copy of the current specifier. It also
extracts two pieces of information from the
<code class="parameter">specifier</code>: It places the <code class="varname">what</code>
data member of the specifier in the <code class="parameter">what</code> variable
and a pointer to the property name in the <code class="parameter">property</code>
variable. These last two output arguments won't be valid if the
<code class="parameter">specifier</code> argument is <code class="constant">NULL</code>.
</p><p>
Both functions fail if the <code class="classname">BMessage</code> doesn't contain
specifiers. In addition, <code class="methodname">GetCurrentSpecifier()</code>
fails if it can't find data in the <code class="classname">BMessage</code> for its
<code class="parameter">specifier</code> and <code class="parameter">property</code>
arguments, and <code class="methodname">PopSpecifier()</code> fails if the
<code class="classname">BMessage</code> isn't one that has been delivered to you
after being processed through a message loop. When it fails,
<code class="methodname">GetCurrentSpecifier()</code> returns
<code class="constant">B_BAD_SCRIPT_SYNTAX</code>, but
<code class="methodname">PopSpecifier()</code> returns
<code class="constant">B_BAD_VALUE</code>. On success, both functions return
<code class="constant">B_OK</code>.
</p><p>
See also: <a class="link" href="BMessage.html#BMessage_AddSpecifier" title="AddSpecifier()"><code class="methodname">AddSpecifier()</code></a>,
<a class="link" href="BMessage.html#BMessage_HasSpecifiers" title="HasSpecifiers()"><code class="methodname">HasSpecifiers()</code></a>,
<a class="link" href="BHandler.html#BHandler_ResolveSpecifier" title="ResolveSpecifier()"><code class="methodname">BHandler::ResolveSpecifier()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_GetInfo"></a>GetInfo()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">GetInfo</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                 <span class="methodparam"><span class="type">type_code* </span><span class="parameter">typeFound</span></span>,<br />                 <span class="methodparam"><span class="type">int32* </span><span class="parameter">countFound</span><span class="initializer"> = <span class="constant">NULL</span></span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">GetInfo</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                 <span class="methodparam"><span class="type">type_code* </span><span class="parameter">typeFound</span></span>,<br />                 <span class="methodparam"><span class="type">bool* </span><span class="parameter">fixedSize</span></span>) <span class="modifier">const</span>;</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">GetInfo</span>(<span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                 <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                 <span class="methodparam"><span class="type">char** </span><span class="parameter">nameFound</span></span>,<br />                 <span class="methodparam"><span class="type">type_code* </span><span class="parameter">typeFound</span></span>,<br />                 <span class="methodparam"><span class="type">int32* </span><span class="parameter">countFound</span><span class="initializer"> = <span class="constant">NULL</span></span></span>) <span class="modifier">const</span>;</code>
</div><p>
Provides information about the data fields stored in the <code class="classname">BMessage</code>.
</p><p>
When passed a <code class="parameter">name</code> that matches a name within the
<code class="classname">BMessage</code>, <code class="methodname">GetInfo()</code> places
the type code for data stored under that name in the variable referred to
by <code class="parameter">typeFound</code> and writes the number of data items
with that name into the variable referred to by
<code class="parameter">countFound</code>. It then returns
<code class="constant">B_OK</code>. If it can't find a <code class="parameter">name</code>
field within the <code class="classname">BMessage</code>, it sets the
<code class="parameter">countFound</code> variable to 0, and returns
<code class="constant">B_NAME_NOT_FOUND</code> (without modifying the
<code class="parameter">typeFound</code> variable).
</p><p>
When the <code class="parameter">fixedSize</code> argument is specified, the bool
referenced by <code class="parameter">fixedSize</code> is set to
<code class="constant">true</code> if all items in the array specified by
<code class="parameter">name</code> must be the same size, and
<code class="constant">false</code> if the items can be of different sizes (see
<a class="link" href="BMessage.html#BMessage_AddData" title="AddData(), AddBool(), AddInt8(), AddInt16(), AddInt32(), AddInt64(), AddFloat(), AddDouble(), AddString(), AddPoint(), AddRect(), AddRef(), AddMessage(), AddMessenger(), AddPointer(), AddFlat()"><code class="methodname">AddData()</code></a>).
</p><p>
When passed a <code class="parameter">type</code> and an
<code class="parameter">index</code>, <code class="methodname">GetInfo()</code> looks only
at fields that store data of the requested <code class="parameter">type</code> and
provides information about the field at the requested
<code class="parameter">index</code>. Indices begin at 0 and are type specific. For
example, if the requested <code class="parameter">type</code> is
<code class="constant">B_DOUBLE_TYPE</code> and the <code class="classname">BMessage</code>
contains a total of three named fields that store double data, the first
field would be at index 0, the second at 1, and the third at 2, no matter
what other types of data actually separate them in the
<code class="classname">BMessage</code>, and no matter how many data items each
field contains. (Note that the <code class="parameter">index</code> in this case
ranges over fields, each with a different name, not over the data items
within a particular named field.) If the requested type is
<code class="constant">B_ANY_TYPE</code>, this function looks at all fields and gets
information about the one at <code class="parameter">index</code> whatever its
type.
</p><p>
If successful in finding data of the <code class="parameter">type</code> requested
at <code class="parameter">index</code>, <code class="methodname">GetInfo()</code> returns
<code class="constant">B_OK</code> and provides information about the data through
the last three arguments:
</p><ul class="itemizedlist"><li><p>
It places a pointer to the name of the data field in the variable referred
to by <code class="parameter">nameFound</code>.
</p></li><li><p>
It puts the code for the type of data the field contains in the variable
referred to by <code class="parameter">typeFound</code>. This will be the same as
the <code class="parameter">type</code> requested, unless the requested type is
<code class="constant">B_ANY_TYPE</code>, in which case
<code class="parameter">typeFound</code> will be the actual type stored under the
name.
</p></li><li><p>
It records the number of data items stored within the field in the variable
referred to by <code class="parameter">countFound</code>.
</p></li></ul><p>
If <code class="methodname">GetInfo()</code> can't find data of the requested
<code class="parameter">type</code> at <code class="parameter">index</code>, it sets the
<code class="parameter">countFound</code> variable to 0, and returns
<code class="constant">B_BAD_TYPE</code>. If the index is out of range, it returns
<code class="constant">B_BAD_INDEX</code>.
</p><p>
This version of <code class="methodname">GetInfo()</code> can be used to iterate
through all the <code class="classname">BMessage</code>'s data. For example:
</p><pre class="programlisting example cpp"><span class="type">char *</span><code class="varname">name</code>;
<span class="type">uint32</span> <code class="varname">type</code>;
<span class="type">int32</span> <code class="varname">count</code>;

for ( <span class="type">int32</span> <code class="varname">i</code> = 0;
      <code class="varname">msg</code>-&gt;<code class="methodname">GetInfo</code>(<code class="constant">B_ANY_TYPE</code>, <code class="varname">i</code>, &amp;<code class="varname">name</code>, &amp;<code class="varname">type</code>, &amp;<code class="varname">count</code>) == <code class="constant">B_OK</code>;
      <code class="varname">i</code>++ ) {
   . . .
}</pre><p>
If the index is incremented from 0 in this way, all data of the requested
type will have been read when <code class="methodname">GetInfo()</code> returns
<code class="constant">B_NAME_NOT_FOUND</code>. If the requested type is
<code class="constant">B_ANY_TYPE</code>, as shown above, it will reveal the name
and type of every field in the <code class="classname">BMessage</code>.
</p><p>
See also: <a class="link" href="BMessage.html#BMessage_AddData" title="AddData(), AddBool(), AddInt8(), AddInt16(), AddInt32(), AddInt64(), AddFloat(), AddDouble(), AddString(), AddPoint(), AddRect(), AddRef(), AddMessage(), AddMessenger(), AddPointer(), AddFlat()"><code class="methodname">AddData()</code></a>, <a class="link" href="BMessage.html#BMessage_FindData" title="FindData(), FindBool(), FintInt8(), FindInt16(), FindInt32(), FindInt64(), FindFloat(), FindDouble(), FindString(), FindPoint(), FindRect(), FindRef(), FindMessage(), FindMessenger(), FindPointer(), FindFlat()"><code class="methodname">FindData()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_HasSpecifiers"></a>HasSpecifiers()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">HasSpecifiers</span>() <span class="modifier">const</span>;</code><p>
Returns <code class="constant">true</code> if the <code class="classname">BMessage</code>
has specifiers added by an <a class="link" href="BMessage.html#BMessage_AddSpecifier" title="AddSpecifier()"><code class="methodname">AddSpecifier()</code></a>
function, and <code class="constant">false</code> if not.
</p><p>
See also: <a class="link" href="BMessage.html#BMessage_AddSpecifier" title="AddSpecifier()"><code class="methodname">AddSpecifier()</code></a>,
<a class="link" href="BMessage.html#BMessage_GetCurrentSpecifier" title="GetCurrentSpecifier(), PopSpecifier()"><code class="methodname">GetCurrentSpecifier()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_IsSystem"></a>IsSystem()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">IsSystem</span>() <span class="modifier">const</span>;</code><p>
Returns <code class="constant">true</code> if the <code class="varname">what</code> data member of the <code class="classname">BMessage</code> object identifies it as a system-defined message, and <code class="constant">false</code> if not.
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_MakeEmpty"></a><a id="BMessage_IsEmpty"></a>
MakeEmpty(), IsEmpty()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">MakeEmpty</span>();</code><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">IsEmpty</span>() <span class="modifier">const</span>;</code><p>
<code class="methodname">MakeEmpty()</code> removes and frees all data that has
been added to the <code class="classname">BMessage</code>, without altering the
<code class="varname">what</code> constant. It returns <code class="constant">B_OK</code>,
unless the message can't be altered (as it can't if it's being dragged), in
which case it returns <code class="constant">B_ERROR</code>.
</p><p>
<code class="methodname">IsEmpty</code> returns <code class="constant">true</code> if the
<code class="classname">BMessage</code> has no data (whether or not it was emptied
by <code class="methodname">MakeEmpty()</code>), and <code class="constant">false</code> if
it has some.
</p><p>
See also: <a class="link" href="BMessage.html#BMessage_RemoveName" title="RemoveName(), RemoveData()"><code class="methodname">RemoveName()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_PrintToStream"></a>PrintToStream()</h4></div></div></div><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">PrintToStream</span>() <span class="modifier">const</span>;</code><p>
Prints information about the <code class="classname">BMessage</code> to the
standard output stream (stdout). Each field of named data is reported in
the following format,
</p><pre class="screen">
#entry <em class="replaceable"><code>name</code></em>, type = <em class="replaceable"><code>type</code></em>, count = <em class="replaceable"><code>count</code></em>
</pre><p>where <em class="replaceable"><code>name</code></em> is the name that the data is registered
under, <em class="replaceable"><code>type</code></em> is the constant that indicates what type
of data it is, and <em class="replaceable"><code>count</code></em> is the number of data items
in the named array.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_RemoveName"></a><a id="BMessage_RemoveData"></a>
RemoveName(), RemoveData()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">RemoveName</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">RemoveData</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span><span class="initializer"> = 0</span></span>);</code><p>
<code class="methodname">RemoveName()</code> removes all data entered in the
<code class="classname">BMessage</code> under <code class="parameter">name</code> and the
name itself. <code class="methodname">RemoveData()</code> removes the single item
of data at <code class="parameter">index</code> in the <code class="parameter">name</code>
array. If the array has just one data item, it removes the array and
<code class="parameter">name</code> just as <code class="methodname">RemoveName()</code>
would.
</p><p>
Both functions free the memory that was allocated to hold the data, and
return <code class="constant">B_OK</code> when successful. However, if there's no
data in the <code class="classname">BMessage</code> under
<code class="parameter">name</code>, they return a
<code class="constant">B_NAME_NOT_FOUND</code> error. If message data can be read
but can't be changed (as it can't for a message that's being dragged), they
both return <code class="constant">B_ERROR</code>. If the
<code class="parameter">index</code> is out of range,
<code class="methodname">RemoveData()</code> returns
<code class="constant">B_BAD_INDEX</code> (the index is too high) or
<code class="constant">B_BAD_VALUE</code> (the value passed is a negative number).
</p><p>
See also: <a class="link" href="BMessage.html#BMessage_MakeEmpty" title="MakeEmpty(), IsEmpty()"><code class="methodname">MakeEmpty()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_ReplaceData"></a><a id="BMessage_ReplaceBool"></a>
<a id="BMessage_ReplaceInt8"></a>
<a id="BMessage_ReplaceInt16"></a>
<a id="BMessage_ReplaceInt32"></a>
<a id="BMessage_ReplaceInt64"></a>
<a id="BMessage_ReplaceFloat"></a>
<a id="BMessage_ReplaceDouble"></a>
<a id="BMessage_ReplaceString"></a>
<a id="BMessage_ReplacePoint"></a>
<a id="BMessage_ReplaceRect"></a>
<a id="BMessage_ReplaceRef"></a>
<a id="BMessage_ReplaceMessage"></a>
<a id="BMessage_ReplaceMessenger"></a>
<a id="BMessage_ReplacePointer"></a>
<a id="BMessage_ReplaceFlat"></a>
ReplaceData(), ReplaceBool(), ReplaceInt8(), ReplaceInt16(),
ReplaceInt32(), ReplaceInt64(), ReplaceFloat(), ReplaceDouble(),
ReplaceString(), ReplacePoint(), ReplaceRect(), ReplaceRef(),
ReplaceMessage(), ReplaceMessenger(), ReplacePointer(),
ReplaceFlat()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceData</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                     <span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">data</span></span>,<br />                     <span class="methodparam"><span class="type">ssize_t </span><span class="parameter">numBytes</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceData</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                     <span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">data</span></span>,<br />                     <span class="methodparam"><span class="type">ssize_t </span><span class="parameter">numBytes</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceBool</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">bool </span><span class="parameter">aBool</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceBool</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                     <span class="methodparam"><span class="type">bool </span><span class="parameter">aBool</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceInt8</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">int8 </span><span class="parameter">anInt8</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceInt8</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                     <span class="methodparam"><span class="type">int8 </span><span class="parameter">anInt8</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceInt16</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                      <span class="methodparam"><span class="type">int16 </span><span class="parameter">anInt16</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceInt16</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                      <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                      <span class="methodparam"><span class="type">int16 </span><span class="parameter">anInt16</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceInt32</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                      <span class="methodparam"><span class="type">int32 </span><span class="parameter">anInt32</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceInt32</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                      <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                      <span class="methodparam"><span class="type">int32 </span><span class="parameter">anInt32</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceInt64</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                      <span class="methodparam"><span class="type">int64 </span><span class="parameter">anInt64</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceInt64</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                      <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                      <span class="methodparam"><span class="type">int64 </span><span class="parameter">anInt64</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceFloat</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                      <span class="methodparam"><span class="type">float </span><span class="parameter">aFloat</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceFloat</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                      <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                      <span class="methodparam"><span class="type">float </span><span class="parameter">aFloat</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceDouble</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                       <span class="methodparam"><span class="type">double </span><span class="parameter">aDouble</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceDouble</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                       <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                       <span class="methodparam"><span class="type">double </span><span class="parameter">aDouble</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceString</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                       <span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">aString</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceString</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                       <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                       <span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">aString</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceString</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                       <span class="methodparam"><span class="type">BString&amp; </span><span class="parameter">aString</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceString</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                       <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                       <span class="methodparam"><span class="type">BString&amp; </span><span class="parameter">aString</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplacePoint</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                      <span class="methodparam"><span class="type">BPoint </span><span class="parameter">point</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplacePoint</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                      <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                      <span class="methodparam"><span class="type">BPoint </span><span class="parameter">point</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceRect</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">BRect </span><span class="parameter">rect</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceRect</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                     <span class="methodparam"><span class="type">BRect </span><span class="parameter">rect</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceRef</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="type">entry_ref* </span><span class="parameter">ref</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceRef</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                    <span class="methodparam"><span class="type">entry_ref* </span><span class="parameter">ref</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceMessage</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                        <span class="methodparam"><span class="type">BMessage* </span><span class="parameter">message</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceMessage</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                        <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                        <span class="methodparam"><span class="type">BMessage* </span><span class="parameter">message</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceMessenger</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                          <span class="methodparam"><span class="type">BMessenger </span><span class="parameter">messenger</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceMessenger</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                          <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                          <span class="methodparam"><span class="type">BMessenger </span><span class="parameter">messenger</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplacePointer</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                        <span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">pointer</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplacePointer</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                        <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                        <span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">pointer</span></span>);</code>
</div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceFlat</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">BFlattenable* </span><span class="parameter">object</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">ReplaceFlat</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                     <span class="methodparam"><span class="type">int32 </span><span class="parameter">index</span></span>,<br />                     <span class="methodparam"><span class="type">BFlattenable* </span><span class="parameter">object</span></span>);</code>
</div><p>
These functions replace a data item in the <code class="parameter">name</code>
field with another item passed as an argument. If an
<code class="parameter">index</code> is provided, they replace the item in the
<code class="parameter">name</code> array at that index; if an
<code class="parameter">index</code> isn't mentioned, they replace the first (or
only) item stored under <code class="parameter">name</code>. If an
<code class="parameter">index</code> is provided but it's out of range, the
replacement fails.
</p><p>
<code class="methodname">ReplaceData()</code> replaces an item in the
<code class="parameter">name</code> field with <code class="parameter">numBytes</code> of
data, but only if the <code class="parameter">type</code> code that's specified for
the data matches the type of data that's already stored in the field. The
<code class="parameter">type</code> must be specific; it can't be
<code class="constant">B_ANY_TYPE</code>.
</p><p>
<code class="methodname">FindFlat()</code> replaces a flattened object with
another <code class="parameter">object</code>, provided that the type reported by
the argument <code class="parameter">object</code> (by its <a class="link" href="BFlattenable.html#BFlattenable_TypeCode" title="TypeCode() , AllowsTypeCode()"><code class="methodname">TypeCode()</code></a>
function) matches the type recorded for the item in the message. If not, it
returns <code class="constant">B_BAD_VALUE</code>.
</p><p>
The other functions are simplified versions of
<code class="methodname">ReplaceData()</code>. They each handle the specific type
of data declared for their last arguments. They succeed if this
<code class="parameter">type</code> matches the type of data already in the
<code class="parameter">name</code> field, and fail if it does not. The new data is
added precisely as the counterpart <a class="link" href="BMessage.html#BMessage_AddData" title="AddData(), AddBool(), AddInt8(), AddInt16(), AddInt32(), AddInt64(), AddFloat(), AddDouble(), AddString(), AddPoint(), AddRect(), AddRef(), AddMessage(), AddMessenger(), AddPointer(), AddFlat()">Add…()</a> function would add it.
</p><p>
If successful, all these functions return <code class="constant">B_OK</code>. If
unsuccessful, they return an error code<code class="constant">B_ERROR</code> if the
message is read-only (as it is while the message is being dragged),
<code class="constant">B_BAD_INDEX</code> if the <code class="parameter">index</code> is out
of range, <code class="constant">B_NAME_NOT_FOUND</code> if the
<code class="parameter">name</code> field doesn't exist, or
<code class="constant">B_BAD_TYPE</code> if the field doesn't contain data of the
specified type.
</p><p>
See also: <a class="link" href="BMessage.html#BMessage_AddData" title="AddData(), AddBool(), AddInt8(), AddInt16(), AddInt32(), AddInt64(), AddFloat(), AddDouble(), AddString(), AddPoint(), AddRect(), AddRef(), AddMessage(), AddMessenger(), AddPointer(), AddFlat()"><code class="methodname">AddData()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_ReturnAddress"></a>ReturnAddress()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">BMessenger </span><span class="methodname">ReturnAddress</span>();</code><p>
Returns a <a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a> object that
can be used to reply to the <code class="classname">BMessage</code>. Calling the
<a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a>'s <a class="link" href="BMessenger.html#BMessenger_SendMessage" title="SendMessage()"><code class="methodname">SendMessage()</code></a>
function is equivalent to calling <a class="link" href="BMessage.html#BMessage_SendReply" title="SendReply()"><code class="methodname">SendReply()</code></a>,
except that the return message won't be marked as a reply. If a reply isn't
allowed (if the <code class="classname">BMessage</code> wasn't delivered), the
returned <a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a> will be
invalid.
</p><p>
If you want to use the <code class="methodname">ReturnAddress()</code> <a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a> to send a
synchronous reply, you must do so before the
<code class="classname">BMessage</code> is deleted and a default reply is sent.
</p><p>
See also:
<a class="link" href="BMessage.html#BMessage_SendReply" title="SendReply()"><code class="methodname">SendReply()</code></a>,
<a class="link" href="BMessage.html#BMessage_WasDelivered" title="WasDelivered(), IsSourceRemote(), IsSourceWaiting(), IsReply(), Previous()"><code class="methodname">WasDelivered()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_SendReply"></a>SendReply()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SendReply</span>(<span class="methodparam"><span class="type">BMessage* </span><span class="parameter">message</span></span>,<br />                   <span class="methodparam"><span class="type">BMessage* </span><span class="parameter">reply</span></span>,<br />                   <span class="methodparam"><span class="type">bigtime_t </span><span class="parameter">sendTimeout</span><span class="initializer"> = <span class="constant">B_INFINITE_TIMEOUT</span></span></span>,<br />                   <span class="methodparam"><span class="type">bigtime_t </span><span class="parameter">replyTimeout</span><span class="initializer"> = <span class="constant">B_INFINITE_TIMEOUT</span></span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SendReply</span>(<span class="methodparam"><span class="type">BMessage* </span><span class="parameter">message</span></span>,<br />                   <span class="methodparam"><span class="type">BHandler* </span><span class="parameter">replyHandler</span><span class="initializer"> = <span class="constant">NULL</span></span></span>,<br />                   <span class="methodparam"><span class="type">bigtime_t </span><span class="parameter">sendTimeout</span><span class="initializer"> = <span class="constant">B_INFINITE_TIMEOUT</span></span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SendReply</span>(<span class="methodparam"><span class="type">uint32 </span><span class="parameter">command</span></span>,<br />                   <span class="methodparam"><span class="type">BMessage* </span><span class="parameter">reply</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SendReply</span>(<span class="methodparam"><span class="type">uint32 </span><span class="parameter">command</span></span>,<br />                   <span class="methodparam"><span class="type">BHandler* </span><span class="parameter">replyHandler</span><span class="initializer"> = <span class="constant">NULL</span></span></span>);</code>
</div><p>
Sends a reply <code class="parameter">message</code> back to the sender of the
<code class="classname">BMessage</code> (in the case of a synchronous reply) or to
a target <a class="link" href="BHandler.html" title="BHandler"><code class="classname">BHandler</code></a>
(in the case of an asynchronous reply). Whether the reply is synchronous or
asynchronous depends on how the <code class="classname">BMessage</code> that's
sending the reply was itself sent:
</p><ul class="itemizedlist"><li><p>
The reply is delivered synchronously if the message sender is waiting for
one to arrive. The function that sent the <code class="classname">BMessage</code>
doesn't return until it receives the reply (or a timeout expires). If an
expected reply has not been sent by the time the
<code class="classname">BMessage</code> object is deleted, a default
<code class="constant">B_NO_REPLY</code> message is returned to the sender. If a
reply is sent after the sender gave up waiting for it to arrive, the reply
<code class="parameter">message</code> disappears into the bowels of the system.
</p></li><li><p>
The reply is delivered asynchronously if the message sender isn't waiting
for a reply. In this case, the sending function designates a target <a class="link" href="BHandler.html" title="BHandler"><code class="classname">BHandler</code></a> and <a class="link" href="BLooper.html" title="BLooper"><code class="classname">BLooper</code></a> for any replies
that might be sent, then returns immediately after putting the
<code class="classname">BMessage</code> in the pipeline. Posted messages and
messages that are dragged and dropped are also eligible for asynchronous
replies.
</p></li></ul><p>
<code class="methodname">SendReply()</code> works only for
<code class="classname">BMessage</code> objects that have been processed through a
message loop and delivered to you. The caller retains ownership of the
reply <code class="parameter">message</code> passed to
<code class="methodname">SendReply()</code>; it can be deleted (or left to die on
the stack) after the function returns.
</p><p>
<code class="methodname">SendReply()</code> sends a message—a reply
message, to be sure, but a message nonetheless. It behaves exactly like the
other message-sending function, <a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a>'s <a class="link" href="BMessenger.html#BMessenger_SendMessage" title="SendMessage()"><code class="methodname">SendMessage()</code></a>:
</p><ul class="itemizedlist"><li><p>
By passing it a <code class="parameter">reply</code> argument, you can ask for a
synchronous reply to the reply message it sends. It won't return until it
receives the reply.
</p></li><li><p>
By supplying a <code class="parameter">replyHandler</code> argument, you can
arrange for an expected asynchronous reply. If a specific target isn't
specified, the <a class="link" href="BApplication.html" title="BApplication"><code class="classname">BApplication</code></a> object
will handle the reply if one is sent.
</p></li></ul><p>
By default, <code class="methodname">SendReply()</code> doesn't return until the
reply message is delivered (placed in the <a class="link" href="BLooper.html" title="BLooper"><code class="classname">BLooper</code></a>'s port queue). It's
possible, in some circumstances, for the receiving port queue to be full,
in which case <code class="methodname">SendReply()</code> will block until a slot
becomes free. However, you can limit how long
<code class="methodname">SendReply()</code> will wait to deliver the message
before it gives up and returns. The <code class="parameter">sendTimeout</code>
argument is the number of microseconds you give the function to do its
work. If the time limit is exceeded, the function fails and returns an
error (<code class="constant">B_TIMED_OUT</code>).
</p><p>
When asking for a synchronous reply, separate
<code class="parameter">sendTimeout</code> and <code class="parameter">replyTimeout</code>
limits can be set for sending the message and receiving the reply. There is
no time limit if a timeout value is set to
<code class="constant">B_INFINITE_TIMEOUT</code>—as it is by default. The
function won't block at all if the timeout is set to 0.
</p><p>
If a <code class="parameter">command</code> is passed rather than a
<code class="parameter">message</code>, <code class="methodname">SendReply()</code>
constructs the reply <code class="classname">BMessage</code>, initializes its
<code class="varname">what</code> data member with the <code class="parameter">command</code>
constant, and sends it just like any other reply. The
<code class="parameter">command</code> versions of this function have infinite
timeouts; they block until the message is delivered and, if requested, a
synchronous reply is received.
</p><p>
This function returns <code class="constant">B_OK</code> if the reply is
successfully sent. If there's a problem in sending the message, it returns
the same sort of error code as <a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a>'s <a class="link" href="BMessenger.html#BMessenger_SendMessage" title="SendMessage()"><code class="methodname">SendMessage()</code></a>.
It may also report a reply-specific problem. The more informative
return values are as follows:
</p><table class="variablelist constants"><thead><tr><th>Constant</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_BAD_REPLY</code></span></p></td><td><p>Attempting to reply to a message that hasn't been delivered yet</p></td></tr><tr><td><p><span class="term"><code class="constant">B_DUPLICATE_REPLY</code></span></p></td><td><p>Sending a reply after one has already been sent and delivered.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_THREAD_ID</code></span></p></td><td><p>Sending a reply to a destination thread that no longer exists.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_PORT_ID</code></span></p></td><td><p>Sending a reply to a
<a class="link" href="BLooper.html" title="BLooper"><code class="classname">BLooper</code></a>
and port that no longer exist.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_TIMED_OUT</code></span></p></td><td><p>Taking longer than the specified time limit to deliver a reply message or
to receive a synchronous reply to the reply.</p></td></tr></tbody></table><p>
If you want to delay sending a reply and keep the
<code class="classname">BMessage</code> object beyond the time it's scheduled to be
deleted, you may be able to detach it from the message loop. See <a class="link" href="BLooper.html#BLooper_DetachCurrentMessage"><code class="methodname">DetachCurrentMessage()</code></a>
in the <a class="link" href="BLooper.html" title="BLooper"><code class="classname">BLooper</code></a> class.
</p><p>
See also:
<a class="link" href="BMessenger.html#BMessenger_SendMessage" title="SendMessage()"><code class="methodname">BMessenger::SendMessage()</code></a>,
<a class="link" href="BLooper.html#BLooper_DetachCurrentMessage"><code class="methodname">BLooper::DetachCurrentMessage()</code></a>,
<a class="link" href="BMessage.html#BMessage_ReturnAddress" title="ReturnAddress()"><code class="methodname">ReturnAddress()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_WasDelivered"></a><a id="BMessage_IsSourceRemote"></a>
<a id="BMessage_IsSourceWaiting"></a>
<a id="BMessage_IsReply"></a>
<a id="BMessage_Previous"></a>
WasDelivered(), IsSourceRemote(), IsSourceWaiting(), IsReply(), Previous()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">WasDelivered</span>() <span class="modifier">const</span>;</code><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">IsSourceRemote</span>() <span class="modifier">const</span>;</code><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">IsSourceWaiting</span>() <span class="modifier">const</span>;</code><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">IsReply</span>() <span class="modifier">const</span>;</code><code class="methodsynopsis cpp"><span class="modifier">const </span><span class="type">BMessage* </span><span class="methodname">Previous</span>() <span class="modifier">const</span>;</code><p>
These functions can help if you're engaged in an exchange of messages or managing an ongoing communication.
</p><p>
<code class="methodname">WasDelivered()</code> indicates whether it's possible to
send a reply to a message. It returns <code class="constant">true</code> for a
<code class="classname">BMessage</code> that was posted, sent, or dropped –
that is, one that has been processed through a message loop—and
<code class="constant">false</code> for a message that has not yet been delivered by
any means.
</p><p>
<code class="methodname">IsSourceRemote()</code> returns <code class="constant">true</code>
if the message had its source in another application, and
<code class="constant">false</code> if the source is local or the message hasn't
been delivered yet.
</p><p>
<code class="methodname">IsSourceWaiting()</code> returns
<code class="constant">true</code> if the message source is waiting for a
synchronous reply, and <code class="constant">false</code> if not. The source thread
can request and wait for a reply when calling either <a class="link" href="BMessenger.html" title="BMessenger"><code class="classname">BMessenger</code></a>'s <a class="link" href="BMessenger.html#BMessenger_SendMessage" title="SendMessage()"><code class="methodname">SendMessage()</code></a>
or <code class="classname">BMessage</code>'s <a class="link" href="BMessage.html#BMessage_SendReply" title="SendReply()"><code class="methodname">SendReply()</code></a>
function.
</p><p>
<code class="methodname">IsReply()</code> returns <code class="constant">true</code> if the
<code class="classname">BMessage</code> is a reply to a previous message (if it was
sent by the <a class="link" href="BMessage.html#BMessage_SendReply" title="SendReply()"><code class="methodname">SendReply()</code></a>
function), and <code class="constant">false</code> if not.
</p><p>
<code class="methodname">Previous()</code> returns the previous message –
the message to which the current <code class="classname">BMessage</code> is a
reply. It works only for a <code class="classname">BMessage</code> that's received
as an asynchronous reply to a previous message. A synchronous reply is
received in the context of the previous message, so it's not necessary to
call a function to get it. But when an asynchronous reply is received, the
context of the original message is lost; this function can provide it.
<code class="methodname">Previous()</code> returns <code class="constant">NULL</code> if
the <code class="classname">BMessage</code> isn't an asynchronous reply to another
message.
</p><p>
See also:
<a class="link" href="BMessenger.html#BMessenger_SendMessage" title="SendMessage()"><code class="methodname">BMessenger::SendMessage()</code></a>,
<a class="link" href="BMessage.html#BMessage_SendReply" title="SendReply()"><code class="methodname">SendReply()</code></a>,
<a class="link" href="BMessage.html#BMessage_ReturnAddress" title="ReturnAddress()"><code class="methodname">ReturnAddress()</code></a>
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_WasDropped"></a><a id="BMessage_DropPoint"></a>
WasDropped(), DropPoint()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">WasDropped</span>() <span class="modifier">const</span>;</code><code class="methodsynopsis cpp"><span class="type">BPoint </span><span class="methodname">DropPoint</span>(<span class="methodparam"><span class="type">BPoint* </span><span class="parameter">offset</span><span class="initializer"> = <span class="constant">NULL</span></span></span>) <span class="modifier">const</span>;</code><p>
<code class="methodname">WasDropped()</code> returns <code class="constant">true</code> if
the user delivered the <code class="classname">BMessage</code> by dragging and
dropping it, and <code class="constant">false</code> if the message was posted or
sent in application code or if it hasn't yet been delivered at all.
</p><p>
<code class="methodname">DropPoint()</code> reports the point where the cursor was
located when the message was dropped (when the user released the mouse
button). It directly returns the point in the screen coordinate system and,
if an <code class="parameter">offset</code> argument is provided, returns it by
reference in coordinates based on the image or rectangle the user dragged.
The <code class="parameter">offset</code> assumes a coordinate system with (0.0,
0.0) at the left top corner of the dragged rectangle or image.
</p><p>
Since any value can be a valid coordinate,
<code class="methodname">DropPoint()</code> produces reliable results only if
<code class="methodname">WasDropped()</code> returns <code class="constant">true</code>.
</p><p>
See also:
<a class="link" href="BView.html#BView_DragMessage" title="DragMessage()"><code class="methodname">BView::DragMessage()</code></a>
</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_Operators"></a>Operators</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_Operator_Equals"></a>= (assignment)</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">BMessage </span><span class="methodname">operator=</span>(<span class="methodparam"><span class="modifier">const </span><span class="parameter"><span class="classname">BMessage&amp;</span></span></span>);</code><p>
Assigns one <code class="classname">BMessage</code> object to another. After the
assignment, the two objects are duplicates of each other without shared
data.
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_Operator_New"></a>new</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">void* </span><span class="methodname">operator new</span>(<span class="methodparam"><span class="type">size_t </span><span class="parameter">numBytes</span></span>);</code><p>
Allocates memory for a <code class="classname">BMessage</code> object, or takes the
memory from a previously allocated cache. The caching mechanism is an
efficient way of managing memory for objects that are created frequently
and used for short periods of time, as <code class="classname">BMessage</code>s
typically are.
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_Operator_Delete"></a>delete</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">void </span><span class="methodname">operator delete</span>(<span class="methodparam"><span class="type">void* </span><span class="parameter">memory</span></span>,<br />                     <span class="methodparam"><span class="type">size_t </span><span class="parameter">numBytes</span></span>);</code><p>
Frees memory allocated by the <code class="classname">BMessage</code> version of
<code class="methodname">new</code>, which may mean restoring the memory to the
cache.
</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BMessage_Constants"></a>Constants</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Constants_MessageSpecifiers"></a><a id="B_NO_SPECIFIER"></a>
<a id="B_DIRECT_SPECIFIER"></a>
<a id="B_INDEX_SPECIFIER"></a>
<a id="B_REVERSE_INDEX_SPECIFIER"></a>
<a id="B_RANGE_SPECIFIER"></a>
<a id="B_REVERSE_RANGE_SPECIFIER"></a>
<a id="B_NAME_SPECIFIER"></a>
<a id="B_ID_SPECIFIER"></a>
<a id="B_SPECIFIERS_END"></a>
Message Specifiers</h4></div></div></div><a id="id929615" class="indexterm"></a><a id="id929624" class="indexterm"></a><a id="id929633" class="indexterm"></a><a id="id929643" class="indexterm"></a><a id="id929652" class="indexterm"></a><a id="id929662" class="indexterm"></a><a id="id929671" class="indexterm"></a><a id="id929681" class="indexterm"></a><a id="id929690" class="indexterm"></a><pre class="programlisting definition c"><code class="constant">B_NO_SPECIFIER</code>
<code class="constant">B_DIRECT_SPECIFIER</code>
<code class="constant">B_INDEX_SPECIFIER</code>
<code class="constant">B_REVERSE_INDEX_SPECIFIER</code>
<code class="constant">B_RANGE_SPECIFIER</code>
<code class="constant">B_REVERSE_RANGE_SPECIFIER</code>
<code class="constant">B_NAME_SPECIFIER</code>
<code class="constant">B_ID_SPECIFIER</code>
<code class="constant">B_SPECIFIERS_END</code> = 128</pre><p>These constants fill the <code class="varname">what</code> slot of specifier
<code class="classname">BMessage</code>s. Each constant indicates what other
information the specifer contains and how it should be interpreted. For
example, a <code class="constant">B_REVERSE_INDEX_SPECIFIER</code> message has an
<code class="varname">index</code> field with an index that counts
backwards from the end of a list. A <code class="constant">B_NAME_SPECIFIER</code>
message includes a <code class="varname">name</code> field that names
the requested item.</p><p>See Also:
<a class="link" href="BMessage.html#BMessage_AddSpecifier" title="AddSpecifier()"><code class="methodname">AddSpecifier()</code></a>,
the <a class="xref" href="TheApplicationKit_Scripting.html" title="Scripting">Scripting</a> chapter.</p></div></div></div><div id="footer"><hr /><div id="footerT">Prev: <a href="BLooper.html">BLooper</a>  Up: <a href="TheApplicationKit.html">The Application Kit</a>  Next: <a href="BMessageFilter.html">BMessageFilter</a> </div><div id="footerB"><div id="footerBL"><a href="BLooper.html" title="BLooper"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a href="TheApplicationKit.html" title="The Application Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a href="BMessageFilter.html" title="BMessageFilter"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="footerBR"><div><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div></div><div id="footerBC"><a href="http://www.access-company.com/home.html" title="ACCESS Co."><img alt="Access Company" src="./images/access_logo.png" /></a></div></div></div><div id="licenseFooter"><div id="licenseFooterBL"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/" title="Creative Commons License"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-nd/3.0/88x31.png" /></a></div><div id="licenseFooterBR"><a href="./LegalNotice.html">Legal Notice</a></div><div id="licenseFooterBC"><span id="licenseText">This work is licensed under a
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative
          Commons Attribution-Non commercial-No Derivative Works 3.0 License</a>.</span></div></div></body></html>
