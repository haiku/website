<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The Be Book - Classes And Methods - The Storage Kit</title><link rel="stylesheet" href="be_book.css" type="text/css" media="all" /><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="./images/favicon.ico" /><!--[if IE]>
    <link rel="stylesheet" type="text/css" href="be_book_ie.css" />
    <![endif]--><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><meta name="keywords" content="Access, BeOS, BeBook, API" /><link rel="start" href="index.html" title="The Be Book" /><link rel="up" href="TheStorageKit.html" title="The Storage Kit" /><link rel="prev" href="BMimeType.html" title="BMimeType" /><link rel="next" href="BNodeInfo.html" title="BNodeInfo" /></head><body><div id="header"><div id="headerT"><div id="headerTL"><a accesskey="p" href="BMimeType.html" title="BMimeType"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a accesskey="u" href="TheStorageKit.html" title="The Storage Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a accesskey="n" href="BNodeInfo.html" title="BNodeInfo"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="headerTR"><div id="navigpeople"><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div><div class="navigboxed" id="navigindex"><a accesskey="i" href="ClassIndex.html" title="Index">I</a></div><div class="navigboxed" id="naviglang" title="English">en</div></div><div id="headerTC">The Be Book - Classes And Methods - The Storage Kit</div></div><div id="headerB">Prev: <a href="BMimeType.html">BMimeType</a>  Up: <a href="TheStorageKit.html">The Storage Kit</a>  Next: <a href="BNodeInfo.html">BNodeInfo</a></div><hr /></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode"></a>BNode</h2></div></div></div><a id="id1240837" class="indexterm"></a><div class="classheader"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td><table width="100%" border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>Derived From:</td><td><a class="link" href="BStatable.html" title="BStatable"><code class="classname">BStatable</code></a></td></tr><tr><td>Mix-in Classes:</td><td>None</td></tr><tr><td>Declared In:</td><td><code class="filename">storage/Node.h</code></td></tr><tr><td>Library:</td><td><code class="filename">libbe.so</code></td></tr><tr><td>Allocation:</td><td>–</td></tr></tbody></table></td><td>
<a class="link overview" href="BNode_Overview.html" title="BNode">Class Overview</a>
<div class="toc"><ul><li><span class="section"><a href="BNode.html#BNode_ConstructorDestructor">Constructor and Destructor</a></span></li><li><span class="section"><a href="BNode.html#BNode_Member_Functions">Member Functions</a></span></li><li><span class="section"><a href="BNode.html#BNode_Operators">Operators</a></span></li><li><span class="section"><a href="BNode.html#BNode_DefinedTypes">Defined Types</a></span></li></ul></div>
</td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_ConstructorDestructor"></a>Constructor and Destructor</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_Constructor"></a>BNode()</h4></div></div></div><div class="synopsisgroup">
<code class="constructorsynopsis cpp"><span class="methodname">BNode</span>();</code>

<code class="constructorsynopsis cpp"><span class="methodname">BNode</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">entry_ref* </span><span class="parameter">ref</span></span>);</code>

<code class="constructorsynopsis cpp"><span class="methodname">BNode</span>(<span class="methodparam"><span class="modifier">const </span><span class="type"><a class="link" href="BEntry.html" title="BEntry"><code class="classname">BEntry</code></a>* </span><span class="parameter">entry</span></span>);</code>

<code class="constructorsynopsis cpp"><span class="methodname">BNode</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">path</span></span>);</code>

<code class="constructorsynopsis cpp"><span class="methodname">BNode</span>(<span class="methodparam"><span class="modifier">const </span><span class="type"><a class="link" href="BDirectory.html" title="BDirectory"><code class="classname">BDirectory</code></a>* </span><span class="parameter">dir</span></span>,<br />      <span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">path</span></span>);</code>

<code class="constructorsynopsis cpp"><span class="methodname">BNode</span>(<span class="methodparam"><span class="modifier">const </span><span class="type"><span class="classname">BNode</span>&amp; </span><span class="parameter">node</span></span>);</code>
</div><p>
Creates a new <code class="classname">BNode</code> object that's initialized to represent a specific
file system node. To retrieve the status of the initialization, call
<a class="link" href="BNode.html#BNode_InitCheck" title="InitCheck()"><code class="methodname">InitCheck()</code></a>
immediately after constructing the object:
</p><pre class="programlisting example cpp"><code class="classname">BNode</code> <code class="varname">node</code>("/boot/lbj/FidoOnFire.gif");
if (<code class="varname">node</code>.<code class="methodname">InitCheck</code>() != <code class="constant">B_OK</code>)
   <span class="comment">/* The object wasn't initialized. */</span></pre><p>
A successfully initialized <code class="classname">BNode</code> object creates a "file descriptor"
through which the object reads and writes the node's data and attributes.
You can only have 256 file descriptors at a time (per application). The
object's file descriptor is closed when the object is deleted, reset
(through
<a class="link" href="BNode.html#BNode_SetTo" title="SetTo(), Unset()"><code class="methodname">SetTo()</code></a>), or unset
(<a class="link" href="BNode.html#BNode_Unset"><code class="methodname">Unset()</code></a>).
</p><ul class="itemizedlist"><li><p>
Default constructor. The object's status will be <code class="constant">B_NO_INIT</code>, and the
file descriptor isn't allocated until you actually initialize the
object with a call to
<a class="link" href="BNode.html#BNode_SetTo" title="SetTo(), Unset()"><code class="methodname">SetTo()</code></a>.
</p></li><li><p>
Copy constructor. The new <code class="classname">BNode</code> is set to the same node as the
argument. Each of the two <code class="classname">BNode</code> objects has its own file descriptor.
</p></li><li><p>
Other constructors. See the
<a class="link" href="BNode.html#BNode_SetTo" title="SetTo(), Unset()"><code class="methodname">SetTo()</code></a> functions.
</p></li></ul></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_Desctructor"></a>~BNode()</h4></div></div></div><code class="destructorsynopsis cpp"><span class="modifier">virtual </span><span class="methodname">~BNode</span>();</code><p>
Frees the object's file descriptor, unlocks the node (if it was locked),
and destroys the object.
</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_Member_Functions"></a>Member Functions</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_GetAttrInfo"></a>GetAttrInfo()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">GetAttrInfo</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">attr</span></span>,<br />                     <span class="methodparam"><span class="type"><a class="link" href="TheStorageKit_DefinedTypes.html#attr_info" title="attr_info"><span class="type">attr_info</span></a>* </span><span class="parameter">info</span></span>) <span class="modifier">const</span>;</code><p>
Gets information about the attribute named by <code class="parameter">attr</code>. The information is
copied into the <a class="link" href="TheStorageKit_DefinedTypes.html#attr_info" title="attr_info"><span class="type">attr_info</span></a>
parameter <code class="parameter">info</code>, which must be allocated before it's passed in.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>Success.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_ENTRY_NOT_FOUND</code>.</span></p></td><td><p>The node doesn't have an attribute named <code class="parameter">attr</code>.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code>.</span></p></td><td><p>The object is uninitialized.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_GetNextAttrName"></a><a id="BNode_RewindAttrs"></a>
GetNextAttrName(), RewindAttrs()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">GetNextAttrName</span>(<span class="methodparam"><span class="type">char* </span><span class="parameter">buffer</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">RewindAttrs</span>();</code><p>
Every <code class="classname">BNode</code> maintains a pointer into its list of attributes.
<code class="methodname">GetNextAttrName()</code> retrieves the name of the attribute that the pointer is
currently pointing to, and then bumps the pointer to the next attribute.
The name is copied into the buffer, which should be at least
<code class="constant">B_ATTR_NAME_LENGTH</code> characters long. The copied name is <code class="constant">NULL</code>-terminated.
When you've asked for every name in the list, <code class="methodname">GetNextAttrName()</code> returns
an error.
</p><div class="admonition warning"><div class="title">Warning</div><div class="graphic"><img class="icon" alt="Warning" width="32" src="./images/admonitions/Stop_32.png" /><div class="text"><p><code class="methodname">GetNextAttrName()</code> does <span class="emphasis"><em>not</em></span>
clear its argument if it returns an error.
This will be corrected in a subsequent release.</p></div></div></div><p>
<code class="methodname">RewindAttrs()</code> resets the <code class="classname">BNode</code>'s
attribute pointer to the first elementin the list.
</p><p>
To visit every attribute name, you would do something like this:
</p><pre class="programlisting example cpp"><span class="comment">/* Print every attribute name. */</span>
<span class="type">char</span> <code class="varname">buf</code>[<code class="constant">B_ATTR_NAME_LENGTH</code>];

while (<code class="varname">node</code>.<code class="methodname">GetNextAttrName</code>(<code class="varname">buf</code>) == <code class="constant">B_OK</code>) {
   <code class="function">printf</code>("&gt; Attr name: %sn", <code class="varname">buf</code>);
}</pre><p>
The attribute list is not static; when you ask for the next attribute
name, you're asking for the next name in the list
<span class="emphasis"><em>as it exists right now</em></span>.
</p><p>
Furthermore, the ordinal position of an attribute within the list is
indeterminate. "Newer" attributes are not necessarily added to the end of
the list: If you alter the list while you're walking through it, you may
get curious results—you may not see the attribute that you just now
added (for example).
</p><p>
In general, it's best to avoid altering the list while you're iterating
over it.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>Success.
</p></td></tr><tr><td><p><span class="term"><code class="constant">B_ENTRY_NOT_FOUND</code>.</span></p></td><td><p>You've hit the end of the list.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code></span></p></td><td><p>The object is uninitialized.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_InitCheck"></a>InitCheck()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">InitCheck</span>() <span class="modifier">const</span>;</code><p>
Returns the status of the most recent initialization.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The object was successfully initialized.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NO_INIT</code>.</span></p></td><td><p>The object is uninitialized.</p></td></tr><tr><td><p><span class="term">Other return values</span></p></td><td><p>See the <a class="link" href="BNode.html#BNode_SetTo" title="SetTo(), Unset()"><code class="methodname">SetTo()</code></a>
function.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_Lock"></a><a id="BNode_Unlock"></a>
Lock(), Unlock()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">Lock</span>();</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">Unlock</span>();</code><p>
Locks and unlocks the <code class="classname">BNode</code>'s node. While the node is locked, no other
object can access the node's data or attributes. More precisely, no other
agent can create a file descriptor to the node. If a file descriptor
already exists to this node, the <code class="methodname">Lock()</code> function fails.
</p><p>
See "<a class="xref" href="BNode_Overview.html#BNode_Node_Locking" title="Node Locking">Node Locking</a>" for details.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The node was successfully locked or unlocked.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BUSY</code>.</span></p></td><td><p>(<code class="methodname">Lock()</code>) The node can't be locked.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_VALUE</code>.</span></p></td><td><p>(<code class="methodname">Unlock()</code>) The node isn't locked.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code>.</span></p></td><td><p>The object is uninitialized.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_ReadAttr"></a><a id="BNode_RemoveAttr"></a>
<a id="BNode_WriteAttr"></a>
ReadAttr(), WriteAttr(), RemoveAttr()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">ssize_t </span><span class="methodname">ReadAttr</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                 <span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                 <span class="methodparam"><span class="type">off_t </span><span class="parameter">offset</span></span>,<br />                 <span class="methodparam"><span class="type">void* </span><span class="parameter">buffer</span></span>,<br />                 <span class="methodparam"><span class="type">size_t </span><span class="parameter">length</span></span>);</code><code class="methodsynopsis cpp"><span class="type">ssize_t </span><span class="methodname">WriteAttr</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                  <span class="methodparam"><span class="type">type_code </span><span class="parameter">type</span></span>,<br />                  <span class="methodparam"><span class="type">off_t </span><span class="parameter">offset</span></span>,<br />                  <span class="methodparam"><span class="modifier">const </span><span class="type">void* </span><span class="parameter">buffer</span></span>,<br />                  <span class="methodparam"><span class="type">size_t </span><span class="parameter">length</span></span>);</code><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">RemoveAttr</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">attr</span></span>);</code><p>
These functions read, write, and remove the node's attributes. Attributes
are name/data pairs, where names must be unique (within a given node) and
the data can be of arbitrary length.
</p><p>
<code class="methodname">ReadAttr()</code> reads the data in the attribute named <code class="parameter">name</code>, and copies it in
<code class="parameter">buffer</code>. The length of the buffer (the maximum number of bytes to copy) is
given by <code class="parameter">length</code>. Currently, the <code class="parameter">type</code>
and <code class="parameter">offset</code> arguments are unused (or
unreliable). The function returns the number of bytes that were actually
read.
</p><p>
<code class="methodname">WriteAttr()</code> erases the data currently held by
<code class="parameter">name</code> (if such an attribute exists) and replaces it
with a copy of the first <code class="parameter">length</code> bytes of data in
<code class="parameter">buffer</code>. The <code class="parameter">type</code> argument
<span class="emphasis"><em>is</em></span> remembered—you can retrieve an attribute's
type through <a class="link" href="BNode.html#BNode_GetAttrInfo" title="GetAttrInfo()"><code class="methodname">GetAttrInfo()</code></a>, for
example—and you need to specify the correct type when you're forming
a query (see <a class="link" href="BQuery.html" title="BQuery"><code class="classname">BQuery</code></a>
and the note below). But, as mentioned above, you don't need to match types
when you're reading the attribute. The <code class="parameter">offset</code>
argument is currently unreliable and shouldn't be used. The functions
returns the number of bytes that were written.
</p><div class="admonition note"><div class="title">Note</div><div class="graphic"><img class="icon" alt="Note" width="32" src="./images/admonitions/Info_32.png" /><div class="text"><p>If you want to use the attribute in a query, its type must be either
<span class="type">string</span>, <span class="type">int32</span>, <span class="type">uint32</span>, <span class="type">int64</span>,
<span class="type">uint64</span>, <span class="type">double</span>, or <span class="type">float</span>. (In other words,
<code class="parameter">type</code> must be <code class="constant">B_STRING_TYPE</code>, or <code class="constant">B_INT32_TYPE</code>, or
<code class="constant">B_UINT32_TYPE</code>, and so on.)</p></div></div></div><div class="admonition warning"><div class="title">Warning</div><div class="graphic"><img class="icon" alt="Warning" width="32" src="./images/admonitions/Stop_32.png" /><div class="text"><p>The value of an indexed attribute must be no more than 255 bytes long.</p></div></div></div><p>
<code class="methodname">RemoveAttr()</code> deletes the attribute given by <code class="parameter">name</code>.
</p><p>
<code class="methodname">ReadAttr()</code> and <code class="methodname">WriteAttr()</code>,
if successful, return the number of bytes read or written.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>(<code class="methodname">RemoveAttr()</code>) The attribute was successfully removed.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_ENTRY_NOT_FOUND</code>.</span></p></td><td><p>(<code class="methodname">ReadAttr()</code>
and <code class="methodname">RemoveAttr()</code>) The attribute doesn't exist.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code>.</span></p></td><td><p>The object is uninitialized.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code>.</span></p></td><td><p>(<code class="methodname">WriteAttr()</code> and
<code class="methodname">RemoveAttr()</code>) This object is a read-only
<a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NOT_ALLOWED</code>.</span></p></td><td><p>(<code class="methodname">WriteAttr()</code>
and <code class="methodname">RemoveAttr()</code>) The node is on a read-only
volume.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_DEVICE_FULL</code>.</span></p></td><td><p>(<code class="methodname">WriteAttr()</code>) Out of disk space.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NO_MEMORY</code>.</span></p></td><td><p>(<code class="methodname">WriteAttr()</code>) Not enough memory to complete the
operation.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_RenameAttr"></a>RenameAttr()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">RenameAttr</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">name</span></span>,<br />                    <span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">new_name</span></span>);</code><p>
Moves the attribute given by <code class="parameter">name</code> to <code class="parameter">new_name</code>.
If <code class="parameter">new_name</code> exists, it's
clobbered.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>The attribute was successfully renamed.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_ENTRY_NOT_FOUND</code>.</span></p></td><td><p>The <code class="parameter">name</code> attribute doesn't exist.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code>.</span></p></td><td><p>The object is uninitialized.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_FILE_ERROR</code>.</span></p></td><td><p>This object is a read-only
<a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_NOT_ALLOWED</code>.</span></p></td><td><p>The node is on a read-only volume.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_SetTo"></a><a id="BNode_Unset"></a>
SetTo(), Unset()</h4></div></div></div><div class="synopsisgroup">
<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SetTo</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">entry_ref* </span><span class="parameter">ref</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SetTo</span>(<span class="methodparam"><span class="modifier">const </span><span class="type"><a class="link" href="BEntry.html" title="BEntry"><code class="classname">BEntry</code></a>* </span><span class="parameter">entry</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SetTo</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">path</span></span>);</code>

<code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">SetTo</span>(<span class="methodparam"><span class="modifier">const </span><span class="type"><a class="link" href="BDirectory.html" title="BDirectory"><code class="classname">BDirectory</code></a>* </span><span class="parameter">dir</span></span>,<br />               <span class="methodparam"><span class="modifier">const </span><span class="type">char* </span><span class="parameter">path</span></span>);</code>
</div><code class="methodsynopsis cpp"><span class="void">void </span><span class="methodname">Unset</span>();</code><p>
Closes the <code class="classname">BNode</code>'s current file descriptor and opens it on the node (of
the entry) that's designated by the arguments.
</p><ul class="itemizedlist"><li><p>
In the <code class="parameter">path</code> version, <code class="parameter">path</code> can be absolute or relative, and can
contain "." and ".." elements. If <code class="parameter">path</code> is relative, it's reckoned off
of the current working directory.
</p></li><li><p>
In the <code class="parameter">dir</code>/<code class="parameter">path</code> version,
<code class="parameter">path</code> must be relative. It's reckoned off of
the directory given by <code class="parameter">dir</code>.
</p></li></ul><p>
<code class="classname">BNode</code> instances never traverse symbolic links. If the designated entry is
a symbolic link, the BNode will open the link's node. (Conversely,
<a class="link" href="BFile.html" title="BFile"><code class="classname">BFile</code></a>
instances <span class="emphasis"><em>always</em></span> traverse symbolic links.)
</p><p>
<code class="methodname">Unset()</code> closes the <code class="classname">BNode</code>'s
file descriptor and sets
<a class="link" href="BNode.html#BNode_InitCheck" title="InitCheck()"><code class="methodname">InitCheck()</code></a> to
<code class="constant">B_NO_INIT</code>.
</p><table class="variablelist returncodes"><thead><tr><th>Return Code</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="constant">B_OK</code>.</span></p></td><td><p>All is well.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_VALUE</code>.</span></p></td><td><p>The designated entry doesn't exist.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BAD_VALUE</code>.</span></p></td><td><p>Uninitialized or malformed argument.</p></td></tr><tr><td><p><span class="term"><code class="constant">B_BUSY</code>.</span></p></td><td><p>The node is locked.</p></td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_Sync"></a>Sync()</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">status_t </span><span class="methodname">Sync</span>();</code><p>
Immediately performs any pending disk transactions for the file,
returning <code class="constant">B_OK</code> on success and an appropriate error message otherwise.
</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_Operators"></a>Operators</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_operator_equals"></a>= (assignment)</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">BNode&amp; </span><span class="methodname">operator=</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">BNode&amp; </span><span class="parameter">node</span></span>);</code><p>
In the expression
</p><pre class="programlisting example cpp"><code class="classname">BNode</code> <code class="varname">a</code> = <code class="varname">b</code>;</pre><p>
<code class="classname">BNode</code> <code class="varname">a</code> is initialized to refer
to the same node as <code class="varname">b</code>. To gauge the
success of the assignment, you should call
<a class="link" href="BNode.html#BNode_InitCheck" title="InitCheck()"><code class="methodname">InitCheck()</code></a> immediately
afterwards. It's safe to assign a <code class="classname">BNode</code> to itself.
</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_operator_inequality"></a><a id="BNode_operator_equality"></a>
== , != (comparison)</h4></div></div></div><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">operator==</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">BNode&amp; </span><span class="parameter">node</span></span>) <span class="modifier">const</span>;</code><code class="methodsynopsis cpp"><span class="type">bool </span><span class="methodname">operator!=</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">BNode&amp; </span><span class="parameter">node</span></span>) <span class="modifier">const</span>;</code><p>
Two <code class="classname">BNode</code> objects are said to be equal if they're set to the same node,
or if they're both <code class="constant">B_NO_INIT</code>.
</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BNode_DefinedTypes"></a>Defined Types</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="node_ref"></a>node_ref</h4></div></div></div><a id="id1243197" class="indexterm"></a><p>
Declared in: <code class="filename">storage/Node.h</code>
</p><pre class="programlisting definition cpp">struct <span class="type">node_ref</span> {
              <code class="methodname">node_ref</code>();
              <code class="methodname">node_ref</code>(const <span class="type">node_ref&amp;</span> <code class="parameter">ref</code>);
              <code class="methodname">~node_ref</code>();

    <span class="type">bool</span>      <code class="methodname">operator==</code>(const <span class="type">node_ref&amp;</span> <code class="parameter">ref</code>) const;
    <span class="type">bool</span>      <code class="methodname">operator!=</code>(const <span class="type">node_ref&amp;</span> <code class="parameter">ref</code>) const;
    <span class="type">node_ref&amp;</span> <code class="methodname">operator=</code>(const <span class="type">node_ref&amp;</span> <code class="parameter">ref</code>);

    <span class="type">dev_t</span>     <code class="varname">device</code>;
    <span class="type">ino_t</span>     <code class="varname">node</code>;
}</pre><p>
The <span class="type">node_ref</span> structure describes a node in a file system.
</p><ul class="itemizedlist"><li><p>
<code class="varname">device</code> contains the device number on which the node is located.
</p></li><li><p>
<code class="varname">node</code> contains the inode of the node.
</p></li></ul><code class="constructorsynopsis cpp"><span class="methodname">node_ref</span>();</code><code class="constructorsynopsis cpp"><span class="methodname">node_ref</span>(<span class="methodparam"><span class="modifier">const </span><span class="type">node_ref&amp; </span><span class="parameter">ref</span></span>);</code><p>
The constructor for the <span class="type">node_ref</span> structure. The first of these
creates an empty <span class="type">node_ref</span>, and the second duplicates an existing
<span class="type">node_ref</span>.
</p><code class="destructorsynopsis cpp"><span class="methodname">~node_ref</span>();</code><p>
The destructor for <span class="type">node_ref</span>.
</p><p>
<code class="methodname">operator ==</code>
</p><p>
Lets you perform comparisons of <span class="type">node_ref</span> structures to see if they
refer to the same node.
</p><p>
<code class="methodname">operator !=</code>
</p><p>
Lets you test to see if two <span class="type">node_ref</span> structures refer to different
nodes.
</p></div></div></div><div id="footer"><hr /><div id="footerT">Prev: <a href="BMimeType.html">BMimeType</a>  Up: <a href="TheStorageKit.html">The Storage Kit</a>  Next: <a href="BNodeInfo.html">BNodeInfo</a> </div><div id="footerB"><div id="footerBL"><a href="BMimeType.html" title="BMimeType"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a href="TheStorageKit.html" title="The Storage Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a href="BNodeInfo.html" title="BNodeInfo"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="footerBR"><div><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div></div><div id="footerBC"><a href="http://www.access-company.com/home.html" title="ACCESS Co."><img alt="Access Company" src="./images/access_logo.png" /></a></div></div></div><div id="licenseFooter"><div id="licenseFooterBL"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/" title="Creative Commons License"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-nd/3.0/88x31.png" /></a></div><div id="licenseFooterBR"><a href="./LegalNotice.html">Legal Notice</a></div><div id="licenseFooterBC"><span id="licenseText">This work is licensed under a
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative
          Commons Attribution-Non commercial-No Derivative Works 3.0 License</a>.</span></div></div></body></html>
