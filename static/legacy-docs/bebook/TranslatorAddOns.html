<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>The Be Book - Classes And Methods - The Translation Kit</title><link rel="stylesheet" href="be_book.css" type="text/css" media="all" /><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="./images/favicon.ico" /><!--[if IE]>
    <link rel="stylesheet" type="text/css" href="be_book_ie.css" />
    <![endif]--><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><meta name="keywords" content="Access, BeOS, BeBook, API" /><link rel="start" href="index.html" title="The Be Book" /><link rel="up" href="TheTranslationKit.html" title="The Translation Kit" /><link rel="prev" href="BTranslatorRoster.html" title="BTranslatorRoster" /><link rel="next" href="TheTranslationKit_DefaultMediaFormats.html" title="Default Media Formats" /></head><body><div id="header"><div id="headerT"><div id="headerTL"><a accesskey="p" href="BTranslatorRoster.html" title="BTranslatorRoster"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a accesskey="u" href="TheTranslationKit.html" title="The Translation Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a accesskey="n" href="TheTranslationKit_DefaultMediaFormats.html" title="Default Media Formats"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="headerTR"><div id="navigpeople"><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div><div class="navigboxed" id="navigindex"><a accesskey="i" href="ClassIndex.html" title="Index">I</a></div><div class="navigboxed" id="naviglang" title="English">en</div></div><div id="headerTC">The Be Book - Classes And Methods - The Translation Kit</div></div><div id="headerB">Prev: <a href="BTranslatorRoster.html">BTranslatorRoster</a>  Up: <a href="TheTranslationKit.html">The Translation Kit</a>  Next: <a href="TheTranslationKit_DefaultMediaFormats.html">Default Media Formats</a></div><hr /></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="TranslatorAddOns"></a>Translator Add-Ons</h2></div></div></div><div class="informaltable"><table border="0"><colgroup><col /><col /></colgroup><tbody><tr><td>Declared In:</td><td><code class="filename">translation/TranslatorAddOn.h</code></td></tr><tr><td>Library:</td><td><code class="filename">libtranslation.so</code></td></tr></tbody></table></div><p>This section describes the functions and data that a translator add-on
must (or can) supply. The translator add-ons that you create and install
are loaded into a
<a class="link" href="BTranslatorRoster.html" title="BTranslatorRoster"><code class="classname">BTranslatorRoster</code></a>
object through its
<a class="link" href="BTranslatorRoster.html#BTranslatorRoster_Default" title="Default()"><code class="methodname">Default()</code></a> or
<a class="link" href="BTranslatorRoster.html#BTranslatorRoster_AddTranslators" title="AddTranslators()"><code class="methodname">AddTranslators()</code></a>
function.</p><p>You compile your add-on as a shared library, link against
<code class="filename">libtranslation.so</code>, and install
the add-on object file in the Translators
subdirectory of <code class="constant">B_USER_ADDONS_DIRECTORY</code>.</p><p>The table below briefly lists the translator add-on symbols:</p><div class="informaltable"><table border="1"><colgroup><col /><col /></colgroup><thead><tr><th>Symbol</th><th>Required?</th><th>Description</th></tr></thead><tbody><tr><td><code class="varname">translatorInfo</code></td><td>yes</td><td>Long description of translator</td></tr><tr><td><code class="varname">translatorName</code></td><td>yes</td><td>Short name of translator</td></tr><tr><td><code class="varname">translatorVersion</code></td><td>yes</td><td>Translator version number</td></tr><tr><td><code class="function">Identify()</code></td><td>yes</td><td>Identify data in a BPositionIO</td></tr><tr><td><code class="function">Translate()</code></td><td>yes</td><td>Translate data from one format to another</td></tr><tr><td><code class="varname">inputFormats</code></td><td>no</td><td>List of supported input formats</td></tr><tr><td><code class="varname">outputFormats</code></td><td>no</td><td>List of supported output formats</td></tr><tr><td><code class="function">GetConfigMessage()</code></td><td>no</td><td>Save current configuration in a BMessage</td></tr><tr><td><code class="function">MakeConfig()</code></td><td>no</td><td>Create a view for user-configuration of translator</td></tr></tbody></table></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="TranslatorAddOns_Functions"></a>Translator Add-on Functions</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="GetConfigMessage"></a>GetConfigMessage()</h4></div><div xmlns:d="http://docbook.org/ns/docbook"><h5 xmlns="http://www.w3.org/1999/xhtml" class="subtitle">Optional</h5></div></div></div><a id="id1297378" class="indexterm"></a><code class="methodsynopsis c"><span class="type">status_t </span><span class="methodname">GetConfigMessage</span>(<span class="methodparam"><span class="type"><a class="link" href="BMessage.html" title="BMessage"><code class="classname">BMessage</code></a>* </span><span class="parameter">ioExtension</span></span>);</code><p>This function stores the current configuration in the
<code class="parameter">ioExtension</code> in such
a manner that it may be flattened, unflattened, and then passed to
<a class="link" href="TranslatorAddOns.html#Translate" title="Translate()"><code class="function">Translate()</code></a>
as an <code class="parameter">ioExtension</code>.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Identify"></a>Identify()</h4></div><div xmlns:d="http://docbook.org/ns/docbook"><h5 xmlns="http://www.w3.org/1999/xhtml" class="subtitle">Required</h5></div></div></div><a id="id1297447" class="indexterm"></a><code class="methodsynopsis c"><span class="type">status_t </span><span class="methodname">Identify</span>(<span class="methodparam"><span class="type"><a class="link" href="BPositionIO.html" title="BPositionIO"><code class="classname">BPositionIO</code></a>* </span><span class="parameter">inSource</span></span>,<br />                  <span class="methodparam"><span class="type">const translation_format* </span><span class="parameter">inFormat</span></span>,<br />                  <span class="methodparam"><span class="type"><a class="link" href="BMessage.html" title="BMessage"><code class="classname">BMessage</code></a>* </span><span class="parameter">ioExtension</span></span>,<br />                  <span class="methodparam"><span class="type">translator_info* </span><span class="parameter">outInfo</span></span>,<br />                  <span class="methodparam"><span class="type">uint32 </span><span class="parameter">outType</span></span>);</code><p>If the translator understands how to convert the data contained in
<code class="parameter">inSource</code> to media type <code class="parameter">outType</code>,
it fills <code class="parameter">outInfo</code> with details about the
input format and return <code class="constant">B_OK</code>. If it doesn't know how to translate the
data, it returns <code class="constant">B_NO_TRANSLATOR</code>.</p><p>The <code class="varname">quality</code> and <code class="varname">capability</code>
fields in <code class="parameter">outInfo</code> are used by the Translation
Kit in selecting the best suited translator for a given translation, so
it is best to be conservative in choosing these values.</p><p>If the media format doesn't have a type code in
<code class="filename">support/TypeConstants.h</code>
(as will most likely be the case), choose a
reasonable value. For example, the Targa handler included with the BeOS
distribution uses the type code 'TGA '.</p><p>The translator need not fill in the <code class="varname">translator</code>
field in <code class="parameter">outInfo</code>;
<a class="link" href="BTranslatorRoster.html" title="BTranslatorRoster"><code class="classname">BTranslatorRoster</code></a>
fills in this value for you.</p><p>Remember that <code class="parameter">inSource</code> may be arriving from any source, including a live
network feed. It's therefore best to steer clear of calls such as
<a class="link" href="BPositionIO.html#BPositionIO_SetSize" title="SetSize()"><code class="methodname">BPositionIO::SetSize()</code></a>
which force all the data out of the stream.
Similarly, it is good practice to read only as much of the stream as you
need.</p><p><code class="parameter">inFormat</code>, if it is not <code class="constant">NULL</code>,
is provided as a hint to the format of the
data in <code class="parameter">inSource</code>. Since it is only a hint, the data may very well be in
some other format.</p><p><code class="parameter">ioExtension</code>, if it is not <code class="constant">NULL</code>,
contains additional information for the
add-on. It is described at length in the section in
<a class="link" href="BTranslatorRoster_Overview.html" title="BTranslatorRoster">BTranslatorRoster Overview</a>
titled
"<a class="xref" href="BTranslatorRoster_Overview.html#BTranslatorRoster_Overview_Configuration" title="Configuration">Configuration</a>".</p><p><code class="parameter">outType</code> may be zero, in which case any output format is acceptable.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="MakeConfig"></a>MakeConfig()</h4></div><div xmlns:d="http://docbook.org/ns/docbook"><h5 xmlns="http://www.w3.org/1999/xhtml" class="subtitle">Optional</h5></div></div></div><a id="id1297676" class="indexterm"></a><code class="methodsynopsis c"><span class="type">status_t </span><span class="methodname">MakeConfig</span>(<span class="methodparam"><span class="type"><a class="link" href="BMessage.html" title="BMessage"><code class="classname">BMessage</code></a>* </span><span class="parameter">ioExtension</span></span>,<br />                    <span class="methodparam"><span class="type"><a class="link" href="BView.html" title="BView"><code class="classname">BView</code></a>** </span><span class="parameter">outView</span></span>,<br />                    <span class="methodparam"><span class="type"><a class="link" href="BRect.html" title="BRect"><code class="classname">BRect</code></a>* </span><span class="parameter">outExtent</span></span>);</code><p>This function creates a new
<a class="link" href="BView.html" title="BView"><code class="classname">BView</code></a>
through which the user configures the
add-on. For example, it could be used to control the degree of image
compression used or the video frame rate. The bounds of the view are
returned in outExtent, although it can be resized at will by an external
source. Changes to the configuration take effect immediately, although
translations should be carried out with the same parameters throughout.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Translate"></a>Translate()</h4></div><div xmlns:d="http://docbook.org/ns/docbook"><h5 xmlns="http://www.w3.org/1999/xhtml" class="subtitle">Required</h5></div></div></div><a id="id1297769" class="indexterm"></a><code class="methodsynopsis c"><span class="type">status_t </span><span class="methodname">Translate</span>(<span class="methodparam"><span class="type"><a class="link" href="BPositionIO.html" title="BPositionIO"><code class="classname">BPositionIO</code></a>* </span><span class="parameter">inSource</span></span>,<br />                   <span class="methodparam"><span class="type">const translator_info* </span><span class="parameter">inInfo</span></span>,<br />                   <span class="methodparam"><span class="type"><a class="link" href="BMessage.html" title="BMessage"><code class="classname">BMessage</code></a>* </span><span class="parameter">ioExtension</span></span>,<br />                   <span class="methodparam"><span class="type">uint32 </span><span class="parameter">outType</span></span>,<br />                   <span class="methodparam"><span class="type"><a class="link" href="BPositionIO.html" title="BPositionIO"><code class="classname">BPositionIO</code></a>* </span><span class="parameter">outDestination</span></span>);</code><p>The translator translates data from <code class="parameter">inSource</code>
to format <code class="parameter">outType</code>, writing
the output to <code class="parameter">outDestination</code>. <code class="parameter">outType</code>
may be zero, in which case it is
assumed to be the default format type for the media group. As in
<a class="link" href="TranslatorAddOns.html#Identify" title="Identify()"><code class="function">Identify()</code></a>,
<code class="parameter">inInfo</code> serves as a hint to the format of the data in
<code class="parameter">inSource</code>. <code class="parameter">ioExtension</code> fills its usual role as a container of
configuration information. The function returns <code class="constant">B_OK</code> if it's able to
convert the data successfully. If it's unable to do so, it returns either
<code class="constant">B_NO_TRANSLATOR</code> or an error value as appropriate.</p></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><hr /><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="TranslatorAddOns_Data"></a>Translator Add-on Data</h3></div></div></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Variables_inputFormats"></a><a id="Variables_outputFormats"></a>
inputFormats, outputFormats</h4></div><div xmlns:d="http://docbook.org/ns/docbook"><h5 xmlns="http://www.w3.org/1999/xhtml" class="subtitle">Optional</h5></div></div></div><pre class="programlisting example c"><span class="type">translation_format</span> <code class="varname">inputFormats</code>[];
<span class="type">translation_format</span> <code class="varname">outputFormats</code>[];</pre><p>These arrays tell
<a class="link" href="BTranslatorRoster.html" title="BTranslatorRoster"><code class="classname">BTranslatorRoster</code></a>
which formats the add-on supports. If
they are not exported by the translator, the add-on's
<a class="link" href="TranslatorAddOns.html#Identify" title="Identify()"><code class="function">Identify()</code></a> will be
called each time an application requests a translation. Each array ends
in an empty <span class="type">translation_format</span> structure, so a typical
<code class="varname">inputFormats</code> would
look like:</p><pre class="programlisting example c"><span class="type">translation_format</span> <code class="varname">inputFormats</code>[] = {
{ 'TGA ', <code class="constant">B_TRANSLATOR_BITMAP</code>, 0.6, 0.5, "image/targa",
"Targa bitmap format" },
{ <code class="constant">B_TRANSLATOR_BITMAP</code>, <code class="constant">B_TRANSLATOR_BITMAP</code>, 0.4, 0.6, "image/x-be-bitmap",
"Be Bitmap format" },
{ 0, 0, 0, 0, 0, 0 }
};</pre><p>and similarly for <code class="varname">outputFormats</code>.</p></div><div class="section"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Variables_translatorInfo"></a><a id="Variables_translatorName"></a>
<a id="Variables_translatorVersion"></a>
translatorInfo, translatorName, translatorVersion</h4></div><div xmlns:d="http://docbook.org/ns/docbook"><h5 xmlns="http://www.w3.org/1999/xhtml" class="subtitle">Required</h5></div></div></div><pre class="programlisting example c"><span class="type">char</span> <code class="varname">translatorInfo</code>[];
<span class="type">char</span> <code class="varname">translatorName</code>[];
<span class="type">int32</span> <code class="varname">translatorVersion</code>;</pre><table class="variablelist fields"><thead><tr><th>Field</th><th>Description</th></tr></thead><tbody><tr><td><p><span class="term"><code class="varname">translatorInfo</code></span></p></td><td><p>Returns a pointer to the translator's long name, e.g.
"aiff translator by the Pie Man (pie@the.man)".</p></td></tr><tr><td><p><span class="term"><code class="varname">translatorName</code></span></p></td><td><p>Returns a pointer to the translator's short name, e.g.
"aiff translator". The short name should be appropriate for display in a
menu.</p></td></tr><tr><td><p><span class="term"><code class="varname">translatorVersion</code></span></p></td><td><p>Gives an "MM.mm" version number for the translator. For
example, a <code class="varname">translatorVersion</code> of 314 is interpreted as version 3.14.</p></td></tr></tbody></table></div></div></div><div id="footer"><hr /><div id="footerT">Prev: <a href="BTranslatorRoster.html">BTranslatorRoster</a>  Up: <a href="TheTranslationKit.html">The Translation Kit</a>  Next: <a href="TheTranslationKit_DefaultMediaFormats.html">Default Media Formats</a> </div><div id="footerB"><div id="footerBL"><a href="BTranslatorRoster.html" title="BTranslatorRoster"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a href="TheTranslationKit.html" title="The Translation Kit"><img src="./images/navigation/up.png" alt="Up" /></a> <a href="TheTranslationKit_DefaultMediaFormats.html" title="Default Media Formats"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="footerBR"><div><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div></div><div id="footerBC"><a href="http://www.access-company.com/home.html" title="ACCESS Co."><img alt="Access Company" src="./images/access_logo.png" /></a></div></div></div><div id="licenseFooter"><div id="licenseFooterBL"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/" title="Creative Commons License"><img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by-nc-nd/3.0/88x31.png" /></a></div><div id="licenseFooterBR"><a href="./LegalNotice.html">Legal Notice</a></div><div id="licenseFooterBC"><span id="licenseText">This work is licensed under a
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative
          Commons Attribution-Non commercial-No Derivative Works 3.0 License</a>.</span></div></div></body></html>
