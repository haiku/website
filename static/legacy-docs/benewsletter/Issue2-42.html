<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Be Newsletters - Volume 2: 1997</title><link rel="stylesheet" href="be_newsletter.css" type="text/css" media="all" /><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="./images/favicon.ico" /><!--[if IE]>
    <link rel="stylesheet" type="text/css" href="be_newsletter_ie.css" />
    <![endif]--><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Be Newsletters" /><link rel="up" href="volume2.html" title="Volume 2: 1997" /><link rel="prev" href="Issue2-41.html" title="Issue 2-41, October 15, 1997" /><link rel="next" href="Issue2-43.html" title="Issue 2-43, October 29, 1997" /></head><body><div id="header"><div id="headerT"><div id="headerTL"><a accesskey="p" href="Issue2-41.html" title="Issue 2-41, October 15, 1997"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a accesskey="u" href="volume2.html" title="Volume 2: 1997"><img src="./images/navigation/up.png" alt="Up" /></a> <a accesskey="n" href="Issue2-43.html" title="Issue 2-43, October 29, 1997"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="headerTR"><div id="navigpeople"><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div><div class="navigboxed" id="naviglang" title="English">en</div></div><div id="headerTC">Be Newsletters - Volume 2: 1997</div></div><div id="headerB">Prev: <a href="Issue2-41.html">Issue 2-41, October 15, 1997</a>  Up: <a href="volume2.html">Volume 2: 1997</a>  Next: <a href="Issue2-43.html">Issue 2-43, October 29, 1997</a></div><hr /></div><div class="article"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Issue2-42"></a>Issue 2-42, October 22, 1997</h2></div></div></div><div class="sect1"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Engineering2-42"></a>Be Engineering Insights: Scripting Anyone?</h2></div><div xmlns:d="http://docbook.org/ns/docbook"><span xmlns="http://www.w3.org/1999/xhtml" class="author">By <span class="firstname">Peter</span> <span class="surname">Potrebic</span></span></div></div></div><p>
Anyone interested in a brief example using the new scripting architecture
in PR1 and PR2? I heard a few "yes's" so here it is.
</p><p>
For a long time developers have been asking for scripting support in the
BeOS. We listened and we added such support in the PR1 release. In
keeping with BeOS philosophy the goal was to add scriptability with
minimal complexity. Hopefully we've achieved that goal. Let us know what
you think.
</p><p>
For a full technical description see:
</p><p>
http://www.be.com/developers/may_dev_conf/transcripts/messagingandscripting
.html
</p><p>
for a transcript of the messaging/scripting session at BeDC, or read
about scripting in the Be Book:
</p><p>
http://www.be.com/documentation/be_book/app/scripting.html
</p><p>
Now I'll give a little example of how to create a class that is
scriptable. Let's suppose you have a view class that can have one of
three states. It also contains a rectangle that defines a hot spot inside
the view. Let's suppose that you want to script those 2 properties.
Here's what the class declaration might look like:
</p><pre class="programlisting cpp">
class <code class="classname">TTriView</code> : public <code class="classname">BView</code> {
      <code class="methodname">TTriView</code>(<code class="classname">BRect</code> <code class="parameter">frame</code>, <span class="type">int32</span> <code class="parameter">state</code>, <span class="type"><code class="classname">BPicture</code> *</span><code class="parameter">pict</code>)
  ...
  <span class="type">void</span>  <code class="methodname">MessageReceived</code>(<span class="type"><code class="classname">BMessage</code> *</span><code class="parameter">msg</code>);
  <span class="type"><code class="classname">BHandler</code>  *</span><code class="methodname">ResolveSpecifier</code>(<span class="type"><code class="classname">BMessage</code> *</span><code class="parameter">msg</code>,
                <span class="type">int32</span> <code class="parameter">index</code>,
                <span class="type"><code class="classname">BMessage</code> *</span><code class="parameter">specifier</code>,
                <span class="type">int32</span> <code class="parameter">form</code>,
                <span class="type">const char *</span><code class="parameter">property</code>);
  ...
  <span class="type">void</span>    <code class="methodname">SetState</code>(<span class="type">int32</span> <code class="parameter">state</code>);
  <span class="type">int32</span>   <code class="methodname">State</code>() const;
  <span class="type">void</span>    <code class="methodname">SetHotSpot</code>(<code class="classname">BRect</code> <code class="parameter">rect</code>);
  <code class="classname">BRect</code>   <code class="methodname">HotSpot</code>() const;
};
</pre><p>
In the <code class="classname">TTriView</code> constructor you can see the 2 features of the class that
we will make scriptable, its state and hot spot. The class also overrides
the <code class="methodname">MessageReceived()</code> hook function. It is in that function where the
script messages will be handled.
</p><p>
The last overridden function is <code class="methodname">ResolveSpecifier()</code>. This is the key
function in terms of making a class scriptable. This is how a class
advertises the "specifiers" that it supports. Let's start with this
function:
</p><pre class="programlisting cpp">
<span class="type"><code class="classname">BHandler</code> *</span><code class="classname">TTriView</code>::<code class="methodname">ResolveSpecifier</code>(
          <span class="type"><code class="classname">BMessage</code> *</span><code class="parameter">msg</code>,
          <span class="type">int32</span> <code class="parameter">index</code>,
          <span class="type"><code class="classname">BMessage</code> *</span><code class="parameter">specifier</code>,
          <span class="type">int32</span> <code class="parameter">form</code>,
          <span class="type">const char *</span><code class="parameter">property</code>)
{
  <span class="type"><code class="classname">BHandler</code>  *</span><code class="varname">target</code> = <code class="constant">NULL</code>;

  if ((<code class="function">strcmp</code>(<code class="parameter">property</code>, "State") == 0) {
    if (<code class="parameter">form</code> == <code class="constant">B_DIRECT_SPECIFIER</code>)
      <code class="varname">target</code> = <code class="varname">this</code>;
  } else if ((<code class="function">strcmp</code>(<code class="parameter">property</code>, "HotSpot") == 0) {
    if (<code class="parameter">form</code> == <code class="constant">B_DIRECT_SPECIFIER</code>)
      <code class="varname">target</code> = <code class="varname">this</code>;
  }

  if (!<code class="varname">target</code>) {
    <code class="varname">target</code> = <code class="classname">BView</code>::<code class="methodname">ResolveSpecifier</code>(<code class="parameter">msg</code>, <code class="parameter">index</code>, <code class="parameter">specifier</code>,
                                     <code class="parameter">form</code>, <code class="parameter">prop</code>);
  }

  return <code class="varname">target</code>;
}
</pre><p>
Let me explain a little of what's going on in the <code class="methodname">ResolveSpecifier()</code>
function. The class is declaring that it understands 2 properties,
"State" and "HotSpot". For each of these properties it can handle DIRECT
specifiers only. There are more kinds of specifiers, see the
documentation in the Be Book for more details.
</p><p>
If the object can handle the message it should return itself (the <code class="varname">this</code>
pointer). This tells the system that the scripting message should be
handled by this object. Otherwise it is very important to call the
inherited version of <code class="methodname">ResolveSpecifier()</code> because some inherited class might
actually understand the message, even if the derived class doesn't.
</p><p>
After getting directed to the correct object, a scripting message will be
passed to the <code class="methodname">MessageReceived</code> function. It is in this function that the
message is actually processed:
</p><pre class="programlisting cpp">
<span class="type">void</span> <code class="classname">TTriView</code>::<code class="methodname">MessageReceived</code>(<span class="type"><code class="classname">BMessage</code> *</span><code class="parameter">msg</code>)
{
  <span class="type">bool</span>      <code class="varname">handled</code> = <code class="constant">false</code>;
  <code class="classname">BMessage</code>  <code class="varname">reply</code>(<code class="constant">B_REPLY</code>);
  <span class="type">status_t</span>  <code class="varname">err</code>;

  switch (<code class="parameter">msg</code>-&gt;<code class="varname">what</code>) {
    case <code class="constant">B_GET_PROPERTY</code>:
    case <code class="constant">B_SET_PROPERTY</code>:
    {
      <code class="classname">BMessage</code>  <code class="varname">specifier</code>;
      <span class="type">int32</span>     <code class="varname">form</code>;
      <span class="type">const char *</span><code class="varname">prop</code>;
      <span class="type">int32</span>      <code class="varname">cur</code>;
      <code class="varname">err</code> = <code class="parameter">msg</code>-&gt;<code class="methodname">GetCurrentSpecifier</code>(&amp;<code class="varname">cur</code>, &amp;<code class="varname">specifier</code>, &amp;<code class="varname">form</code>,
        &amp;<code class="varname">prop</code>);

      if (!<code class="varname">err</code> &amp;&amp; (strcmp(<code class="varname">prop</code>, "State") == 0)) {
        if (<code class="parameter">msg</code>-&gt;<code class="varname">what</code> == <code class="constant">B_GET_PROPERTY</code>) {
          <code class="varname">reply</code>.<code class="methodname">AddInt32</code>("result", <code class="methodname">State</code>());
          <code class="varname">handled</code> = <code class="constant">true</code>;
        } else {
          <span class="type">int32</span> <code class="varname">new_state</code>;
          <code class="varname">err</code> = <code class="parameter">msg</code>-&gt;<code class="methodname">FindInt32</code>("data", &amp;<code class="varname">new_state</code>);
          if (!<code class="varname">err</code>) {
            <code class="methodname">SetState</code>(<code class="varname">new_state</code>);
            <code class="varname">reply</code>.<code class="methodname">AddInt32</code>("error", <code class="constant">B_OK</code>);
            <code class="varname">handled</code> = <code class="constant">true</code>;
          }
        }
      } else if (!err &amp;&amp; (strcmp(prop, "HotSpot") == 0)) {
        if (<code class="parameter">msg</code>-&gt;<code class="varname">what</code> == <code class="constant">B_GET_PROPERTY</code>) {
          <code class="varname">reply</code>.<code class="methodname">AddRect</code>("result", <code class="methodname">HotSpot</code>());
          <code class="varname">handled</code> = <code class="constant">true</code>;
        } else {
          <code class="classname">BRect</code>  <code class="varname">new_spot</code>;
          <code class="varname">err</code> = <code class="parameter">msg</code>-&gt;<code class="methodname">FindRect</code>("data", &amp;<code class="varname">new_spot</code>);
          if (!<code class="varname">err</code>) {
            <code class="methodname">SetHotSpot</code>(<code class="varname">new_spot</code>);
            <code class="varname">reply</code>.<code class="methodname">AddInt32</code>("error", <code class="constant">B_OK</code>);
            <code class="varname">handled</code> = <code class="constant">true</code>;
          }
        }
      }
      break;
    }
    ...    <span class="comment">// other 'cases' go here</span>
  }

  if (<code class="varname">handled</code>)
    <code class="parameter">msg</code>-&gt;<code class="methodname">SendReply</code>(&amp;<code class="varname">reply</code>);
  else
    <code class="classname">BView</code>::<code class="methodname">MessageReceived</code>(<code class="varname">msg</code>);
}}
</pre><p>
In the above code you can see that the class supports either GETing or
SETing the 2 scriptable properties of <code class="classname">TTriView</code>. These properties can't be
created or deleted (i.e. <code class="constant">B_CREATE_PROPERTY</code> or <code class="constant">B_DELETE_PROPERTY</code>). More
complex classes will support these and other options.
</p><p>
When getting or setting the State of the view, the data being dealt with
is an integer. For this reason the code uses <code class="methodname">FindInt32()</code>
and <code class="methodname">AddInt32()</code> in
the SET and GET cases respectively. In the HotSpot case the corresponding
<code class="methodname">FindRect()</code> and <code class="methodname">AddRect()</code> functions are used.
</p><p>
Note that when setting an attribute, the data should always be found in
an entry named "data":
</p><pre class="programlisting cpp">
  <code class="varname">err</code> = <code class="parameter">msg</code>-&gt;<code class="methodname">FindRect</code>("data", &amp;<code class="varname">new_spot</code>);
  <span class="comment">// —or --</span>
  <code class="varname">err</code> = <code class="parameter">msg</code>-&gt;<code class="methodname">FindInt32</code>("data", &amp;<code class="varname">new_state</code>);
</pre><p>
When handling a GET message, the data being returned should always be
placed in a entry called "result":
</p><pre class="programlisting cpp">
  <code class="varname">reply</code>.<code class="methodname">AddInt32</code>("result", <code class="methodname">State</code>());
  <span class="comment">// —or --</span>
  <code class="varname">reply</code>.<code class="methodname">AddRect</code>("result", <code class="methodname">HotSpot</code>());
</pre><p>
Placing an error code in the entry "error" is another scripting
convention worth noting.
</p><p>
The final step is to send a reply to the scripting message. Notice that a
reply is sent whether the message is setting or getting data. In the GET
case it is obvious that a reply is needed, because the requested data
must be returned. In the SET case the class still returns a message to
indicate the success or failure of the SET.
</p><p>
That's all there is to this simple scripting example. As always, if there
are any questions just post them to BeDevTalk or send me a
message.Content-Type: application/x-be_attribute; name="scripting.article"
</p></div><hr class="pagebreak" /><div class="sect1"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="News2-42"></a>News From The Front</h2></div><div xmlns:d="http://docbook.org/ns/docbook"><span xmlns="http://www.w3.org/1999/xhtml" class="author">By <span class="firstname">William</span> <span class="surname">Adams</span></span></div></div></div><p>
Did you get the message? I'm sure I sent it, why haven't you responded?
If you've been using <code class="classname">BMessageFilter</code>s, then your brain cells can probably
recognize this pattern of thought.
</p><p>
As written previously, <code class="classname">BMessageFilter</code>s are wonderful things. They make
dynamic extension using <code class="classname">BLooper</code>s
and <code class="classname">BHandler</code>s relatively easy in the
BeOS. I've gone over how you can use a filter to capture things like
keydowns, mouse movements, and any other messages that are normally
headed for your classes. Now I want to talk about some of the mechanics
for using them in particular situations.
</p><p>
Did you know that after you use <code class="methodname">BLooper::AddCommonFilter()</code>, your message
filter is added to the bottom of a list. When a new message comes in to
be processed, this list of filters is traversed from the top to the
bottom. That is First in First Processed. This is an implementation
detail, but it's necessary to know in order to achieve certain behaviors
in message processing.
</p><p>
Here's a task. You want to create a user interface test harness. You need
to capture and playback all keystrokes and mouse movement. You want to be
able to create a script that will saves these events in some way for
later playback. How can you do such a thing? With <code class="classname">BMessageFilter</code>s, of
course.
</p><p>
First of all, write a capture filter. All it has to do is get every
message, examine it to see if it's a mouse or key message, and capture it
if it is. It will not actually interfere with the processing of messages,
it will just examine and capture the appropriate ones.
</p><pre class="programlisting cpp">
<code class="classname">CaptureFilter</code>::<code class="methodname">CaptureFilter</code>()
  : <code class="classname">BMessageFilter</code>()
{}

<span class="type">filter_result</span>
<code class="classname">CaptureFilter</code>::<code class="methodname">Filter</code>(<span class="type"><code class="classname">BMessage</code> *</span><code class="parameter">msg</code>, <span class="type"><code class="classname">BHandler</code> **</span><code class="parameter">target</code>)
{
  switch (value)
  {
     case <code class="constant">B_KEY_DOWN</code>:
       <span class="comment">// capture keydown</span>
       break;
     case <code class="constant">B_MOUSE_DOWN</code>:
       <span class="comment">// capture mouse down</span>
       break;
  }

  return <code class="constant">B_DISPATCH_MESSAGE</code>;
}
</pre><p>
Simply put, this filter will examine all messages, and capture for later
playback all the ones that are either keydown, or mousedown. Simple
enough. You can embellish it with the actual capture code. To use this
filter, you can simply call <code class="methodname">AddCommonFilter</code> on whatever window object
whose events you want to capture. Easy enough.
</p><p>
Now let's say you want to do something a little bit more fancy, before
messages are actually captured, you want to filter them out to eliminate
excessive mouse movement, or you want to modify the events in some way
before they are captured.
</p><p>
Well, you can simply call <code class="methodname">AddCommonFilter</code> again and your filter is in the
chain...but not in the right order. Remember, they are processed in
first-in, first-processed order. We need to be able to change this
processing order. The only really good way to do this is to sub-class the
<code class="classname">BLooper</code>, or <code class="classname">BHandler</code>, and add the appropriate message filter list
processing code yourself.
</p><p>
What we want to achieve is the reversal of ordering in the message list.
There is no real easy way for you to change the processing order, so you
need to change the order in which the items are added to the list.
</p><pre class="programlisting cpp">
virtual <span class="type">void</span> <code class="methodname">AddCommonFilter</code>(<span class="type"><code class="classname">BMessageFilter</code> *</span><code class="parameter">filter</code>);
</pre><p>
We can achieve what we want by implementing this single method. Reading
the comments of this code will give you the flavor of what is going on.
</p><pre class="programlisting cpp">
<span class="type">void</span>
<code class="classname">MessageLooper</code>::<code class="methodname">AddCommonFilter</code>(<span class="type"><code class="classname">BMessageFilter</code> *</span><code class="parameter">filter</code>)
{
  <span class="comment">// Check for locking. We have to be locked before we</span>
  <span class="comment">// can proceed or multiple threads could be trying to</span>
  <span class="comment">// create the filter list at the same time.</span>

  <span class="type"><code class="classname">BLooper</code> *</span><code class="varname">loop</code> = <code class="methodname">Looper</code>();

  if (<code class="varname">loop</code> &amp;&amp; !<code class="varname">loop</code>-&gt;<code class="methodname">IsLocked</code>())
  {
    <code class="function">debugger</code>("MessageLooper::AddCommonFilter - Owning Looper
              must be locked before calling
              AddCommonFilter");
    return;
  }

  <span class="comment">// <code class="classname">BLooper</code>::<code class="methodname">RemoveCommonFilter</code> doesn't reset the looper to</span>
  <span class="comment">// <code class="constant">NULL</code> when the filter is removed, so this check is not</span>
  <span class="comment">// valid after the filter is removed. This is a bug and</span>
  <span class="comment">// will be fixed in future releases. Until then, you might</span>
  <span class="comment">// want to disable the check.</span>

  <span class="comment">//if (filter-&gt;Looper() != NULL)</span>
  <span class="comment">//{</span>
  <span class="comment">//  debugger("A MessageFilter can only be used once.");</span>
  <span class="comment">//  return;</span>
  <span class="comment">//}</span>

  <span class="type"><code class="classname">BList</code> *</span><code class="varname">newList</code> = <code class="methodname">CommonFilterList</code>();
  if (0 == <code class="varname">newList</code>)
  {
    <code class="varname">newList</code> = new <code class="classname">BList</code>();
    <code class="methodname">SetCommonFilterList</code>(<code class="varname">newList</code>);
  }

  <span class="comment">// Most important line, this makes sure the items</span>
  <span class="comment">// are added to the top of the list instead of the</span>
  <span class="comment">// bottom.</span>

  <code class="varname">newList</code>-&gt;<code class="methodname">AddItem</code>(<code class="parameter">filter</code>, 0);
}
</pre><p>
Once you use this new <code class="methodname">AddCommonFilter</code>, your filter list will act as a
stack, with last-in, first-out processing. So you can add a filter that
captures all messages, and doesn't send them on to the Looper until it
has sent them out to the network and back, or whatever else you want to
have happen. The main benefit of having your filters processed in this
order is that you can layer on and supersede functionality, which you
can't do with the default processing order.
</p><p>
It's only one method to implement, and you benefit from it tremendously
in certain situations. I have found it to be quite useful, and my code is
more flexible and dynamic for it.
</p><p>
As this newsletter approaches its 100th issue, there will be more authors
participating than ever, bringing you more details of the BeOS to help
you write that tractor driving killer app. I'll see you at the front.
</p></div><hr class="pagebreak" /><div class="sect1"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Gassee2-42"></a>One Step Behind...</h2></div><div xmlns:d="http://docbook.org/ns/docbook"><span xmlns="http://www.w3.org/1999/xhtml" class="author">By <span class="firstname">Jean-Louis</span> <span class="surname">Gassée</span></span></div></div></div><p>
That's how I felt the morning after writing last week's column discussing
the little contractual misunderstanding between Sun and Microsoft. A few
hours after our newsletter hit the Net, Sun and Microsoft posted the text
of their Java licensing agreement on the Web.
</p><p>
As my e-mail correspondents vigorously suggested, I read the contract,
and I read it again, and I read it again. And I decided to wait for the
Agenda conference held in Phoenix, Arizona, on October 20-21. Scott
McNealy, Bill Gates, Stewart Alsop, Bob Metcalfe, John Doerr, Andy Grove
and other luminaries were bound to help me understand the finer points of
this dispute.
</p><p>
Right at the end of the Monday morning coffee break, I went back to the
big ballroom, looking forward to Eric Schmidt's "Java as a soap opera"
presentation for enlightenment—and entertainment. As I settled down,
the conference organizers were playing one of the satirical videos
customarily used to fill idle times.
</p><p>
On the big screen, Janet Reno was being ribbed for her ineffectual DOJ
anti-trust pursuits and her political tin ear—I thought, until I
realized it was a genuine real-time CNN feed and our Attorney General was
taking on Microsoft again.
</p><p>
This time, Janet alleges, Microsoft is in breach of the 1995 consent
decree overseeing the practice of bundling software products, forcing,
I'm sorry, "incentivizing" customers to buy more Microsoft products
together and crowding the competition out. Specifically, the DOJ alleges
Microsoft uses its dominant market position to "force" manufacturers and
consumers to buy the Explorer browser together with the Windows operating
system in violation of the 1995 consent decree. Further, the DOJ
complains, Microsoft uses non-disclosure agreements to compel their
business partners to give them advance warning of government inquiries
and to prevent them from volunteering information to the DOJ.
</p><p>
Burned by my poor timing last week, I'll wait. So far, Wall Street seems
to be shrugging the complaint off: This morning Microsoft's stock is up
and Netscape's is down—whatever that means.
</p><p>
Returning to Java, Eric Schmidt gave a very clever presentation, taking
turns at all sides in the issue, Sun's, Microsoft's, and the rest of us.
Later, we heard directly, very, from Scott McNealy as well as his mother,
a rather assertive and golden-hearted individual who makes her son blush.
And we were treated to a fireside chat with the Chairman. And the result
is...more confusion.
</p><p>
Regarding the contract, listening to one side or the other is more
instructive on issues of motive than on fact. Legal eagles are more
helpful: Most of the ones not affiliated with either side seem to agree
Microsoft is, or can easily put itself in at least narrow compliance with
the agreement by posting missing bits, classes somewhere on their site
without necessarily bundling them with their product. An irony at a time
when Microsoft is sued for bundling other bits. But let's move from
contractual Talmud to marketplace Kriegspiel. What are the possible moves?
</p><p>
Microsoft could decide to pick up its marbles and not offer a Java
implementation at all. With 95% of desktop PCs, would this kill Java? Not
necessarily, Sun or others can offer a Java VM for Windows and, voilà,
Pure Java programs run on Windows, Java-powered Web pages work. This
would allow Sun and its ally to proceed with their game plan: Expand the
Java definition, and the underlying Java VM to the point of making
Windows unnecessary and irrelevant. Java would morph into Java OS,
sporting a myriad of applications, an alternative to Windows or, even
better, its successor, more in tune with the new world of hardware-blind
distributed computing applications.
</p><p>
This assumes much passivity from Microsoft. Developing a
Microsoft-unfriendly platform by starting on top of Windows isn't an easy
proposition. All sorts of technical glitches could "develop" along the
way and lawyers salivate today when they fantasize about this direction.
As in the old IBM days, the Java camp would need to force full disclosure
of all internal Windows APIs. This could take a long time.
</p><p>
Another direction for Microsoft would be to abandon the Java label, call
their "dialect" J++ and happily continue on their merry way having
"embraced and extended" the language as advertised all along. Once the
outcry dies, the Java consortium can offer a competing "Pure Java" VM and
pursue the course outlined above. This is probably an even more difficult
challenge: Imagine a J++ engine and a Java VM sitting on the same system.
How would most customers feel about this? Which engine would the
developers pick if they want to make money—as opposed to making a
statement?
</p><p>
There are a few more options left. Microsoft could capitulate and tell
Sun "I've sinned against you," Pure Java would run everywhere and
progressively make Windows passé and hardware irrelevant. Possible in
another universe, but not likely in this one.
</p><p>
What is perhaps a little more likely is some kind of muddy compromise.
Sun is hinting darkly they don't want to settle for Microsoft to just pay
the contractual $35 million in liquidated damages and go home. Suns wants
Microsoft to be compelled by the courts to fully honor the licensing
agreement, or, if I read correctly, pay much bigger damages for the harm
allegedly done to the industry. Or settle for less in a mealy-mouthed
compromise.
</p><p>
In the mean time, Sun is already reminding us that Java is much more
important to new, emerging genres of computing devices such as
appliances, network computers, smart cards, mobile communicators and
rings opening doors, ski lifts and ATMs. This is, after all, a return to
the original premise of First Person and Oak, respectively the originator
and original name of Java. Please remember, I promised confusion.
</p><p>
One thread says Java is a way to re-open the market by creating a new
computing platform capable of making Windows less of a toll gate. Another
line of discourse states desktop computers matter a lot less than the
many new genres of computing devices enabled by semiconductor technology
and the communications infrastructure—and, above all, desired by
consumers.
</p><p>
Which one will work? Your guess is better than mine.
</p></div><hr class="pagebreak" /><div class="sect1"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BeDevTalk2-42"></a>BeDevTalk Summary</h2></div></div></div><p>
BeDevTalk is an unmonitored discussion group in which technical
information is shared by Be developers and interested parties. In this
column, we summarize some of the active threads, listed by their subject
lines as they appear, verbatim, in the mail.
</p><p>
To subscribe to BeDevTalk, visit the mailing list page on our web site:
http://www.be.com/aboutbe/mailinglists.html.
</p><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id595635"></a>NEW</h3></div></div></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id595641"></a>Subject: BeOS security</h4></div></div></div><p>
Speaking of security: What level of enforcement should an OS provide?
Are security issues a matter of personal administration (as opposed to
OS considerations)? Can security be enforced (programmatically) at the
user level?
</p><p>
The discussion became more pertinent as our listeners exhorted Be to do
the right thing. But which right thing? Some suggestions included:
</p><ul class="itemizedlist"><li><p>
Monitor and log all user activity.
</p></li><li><p>
Provide an encrypted TCP/IP stack with strong two-key encryption,
strong cryptographic authentication, and variable-domain certificates
</p></li></ul><p>
Paraphrasing Andrew van der Stock, who typed in a laundry list that
fairly summarized the levels of security:
</p><div class="orderedlist"><ol><li><p>
Application: Apps should have a way of invoking security
features.
</p></li><li><p>
Underlying kernel services: should check that a desired
resource is available to a client app.
</p></li><li><p>
A coherent file system security model that allows acl's to be
set, and that denies access to intruders.
</p></li><li><p>
A coherent tree strategy that allows plug-ins for tree access.
</p></li><li><p>
A TCP/IP stack that is immune from all known protocol exploits.
</p></li></ol></div></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id595717"></a>Subject: opinion on UI issue</h4></div></div></div><p>
From Josh Berdine:
</p><p>
“<span class="quote">...an app is running with a window open in one workspace and the user
requests the app to open another window from a different workspace.
What is the desired behaviour; should the new window open in the
workspace the app is already running in or in the workspace the user is
working in?</span>”
</p><p>
The current behaviour is that the desktop switches to the "old"
workspace. Many readers think that switching workspaces is almost
always undesirable—if you invoke an entity from workspace N, it
should appear in workspace N. A proposed better way: Window clones in
multiple workspaces (a la the Workspaces preference itself).
</p><p>
Relatedly, what should happen when you double-click an app icon for an
app that's already running? Some folks think that the Single Launch
approach is misguided: When you double-click an app, you want a new
document (right?)—you don't want to be led to the documents that are
already open (if you want the latter, so the argument goes, you can ask
DeskBar to take you there).
</p><p>
Why bother with the programming pain of single-launch/multiple-doc?
Apps are small and fast: Why not just launch another copy of the app
for every document? The counter-argument: In an object-oriented world,
it's not a pain to support multiple documents, and managing multiple
documents (so you can quickly switch between them, for example) is
certainly easier from a single running app. Regarding "small and fast":
App images may be light in the BeOS, but that's no reason to waste
resources.
</p><p>
Still relatedly, what happens to the Single Launch model when the BeOS
is multi-user with X-style remote windows? You launch an app, then your
friend launches the same app from a remote workspace. Here the "right
thing" is (more) obvious: You clearly don't want to compete for the
same app image.
</p><p>
And more: Duncan Wilcox doesn't like apps that steal window focus (such
as CW's error message window). We second the disgruntlement.
</p></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id595786"></a>Subject: What the?!?</h4></div></div></div><p>
Currently, the BeOS limits its RAMification to 512 meg. Dominic
Giampaolo explains why:
</p><p>
“<span class="quote">The problem on PPC is that we use BAT registers to map physical memory
and they can only map 256 megs each. We chose to use one [BAT] for the
video card and [another for] ... other devices. We will boot with more
than 512 megs of RAM but we just won't use it all. This is definitely
not the ideal situation but since such large ram sizes aren't that
common, the solution is acceptable until we can do better.</span>”
</p><p>
So what are the "better" solutions, and is Be working on it?
</p><p>
THE BE LINE: Mr. Giampaolo and Bob Herold (Be's Colonel of Kernels)
reassured the crowd that, yes, the solutions are known and Be will fix
this situation.
</p></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id595824"></a>Subject: Live updates</h4></div><div xmlns:d="http://docbook.org/ns/docbook"><h5 xmlns="http://www.w3.org/1999/xhtml" class="subtitle">
Tracker features<br />
Tracker questions
</h5></div></div></div><p>
Tracker suggestions and observations (solicited by Be's Pavel Cisler):
</p><ul class="itemizedlist"><li><p>
How about a "Round Up" option that moves all icons (inside a
<span class="application">Tracker</span> window) within a spitting distance of each other? The "Clean
Up" item snaps each icon to the nearest point in a grid, but if an
icon is over yonder, it stays way over there.
</p></li><li><p>
Dragged icons should cast a shadow. Also, highlighted icons
should glow rather than grow dim.
</p></li><li><p>
<span class="keysym">Command</span>+<span class="keycap">V</span>
should create a file into which Pasteboard's current
data is copied. Similarly, dragging cut data and dropping on the
Desktop should create a file (on the Desktop) that holds the data.
</p></li><li><p>
The <span class="application">Tracker</span> should provide an interface that lets the user set a
file's icon. (Pavel says: Use the <span class="application">FileTypes</span> app).
</p></li><li><p>
The pointer in a modified drag should change to indicate the type
of operation that will be performed (i.e. move, copy, link).
</p></li><li><p>
Currently, the Tracker doesn't do live <code class="function">stat()</code> updates—as an
(open) file grows in size, the Tracker doesn't update the window that
lists the file (it's only updated when the file is closed). This is a
feature, sort of. As Dominic Giampaolo pointed out:
</p><p>
“<span class="quote">The problem is that while your ftp transfer might be nice to see
updated frequently, those same Tracker updates would be disastrous if
you were trying to stream live video to disk.</span>”
</p></li></ul><p>
Okay, so general updating may be overkill—But what if updates were
on demand, where demand is signalled by an open Get Info window (as
suggested by Chip Paul)?
</p></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id595931"></a>Subject: Realtime Audio mixing and modification</h4></div></div></div><p>
Kuraiken started a thread about realtime audio signal processing. He'd
like to see an API for 3D sound, room simulation, mixing, networked
sound, and so on. Many folks wrote in to point out that much of what
Mr. Kuraiken wants is here! Now! On your desktop!
</p><p>
Be doesn't have any built-in 3D sound or room simulation API, but
mixing is trivial (although, as was pointed out, some apps do it
incorrectly), and getting audio from the net is simply a matter of
reaching out and touching someone.
</p><p>
The discussion broached the subject of multiple audio apps sharing a
common data stream. Is it better to build separate processing *add-ons*
that plug into a master app, or separate processing *apps* that
subscribe to a global stream? The argument centered on the efficiency
of multiple vs. single address spaces.
</p><p>
The major controversants, while exhibiting commendable politesse,
remained respectively unmoved by the counterpoints. Look for this one
to drag on into the night, break into a brawl, and end with up
everybody drunk, overly sentimental, and pledging undying brotherhood.
</p></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id595971"></a>Subject: BLoopers losing messages</h4></div></div></div><p>
A <code class="classname">BLooper</code>'s message queue isn't infinite. It throws away messages that
overflow its port's 100 message limit. Is there anything you can do to
change the limit?
</p><p>
For a <code class="classname">BLooper</code>, yes—use the constructor; but for
a <code class="classname">BWindow</code>, no --
you're stuck with the 100 message default. However, suggests Brian
Stern, an app that needs a queue that's deeper than 100 messages is
either badly designed or poorly implemented.
</p><p>
Peter Potrebic mentioned that he's looking into making <code class="classname">BWindow</code> more
flexible with regard to message queue depth. John Cooke promptly rained
on that little parade:
</p><p>
“<span class="quote">It is fine for Be to set whatever limit they like, but programmers
must always be aware that *for all limits there exists a scenario where
the limit will be reached* ...So whacking up the limit only gives one
the illusion of solving the problem.</span>”
</p><p>
For calibration, Michael Crawford sent along a data point:
</p><p>
“<span class="quote">Just for comparison, the Mac OS event queue holds 20 (count 'em) 20
events. If the queue overflows, the new ones are still added to the
end, while the ones at the head are dropped!</span>”
</p><p>
Back to Be: What happens in FBC land if the <code class="classname">BWindow</code> constructor is
improved to accept a queue-setting argument? Will this break
compatibility? Says Jon Watte:
</p><p>
“<span class="quote">Adding an additional constructor will not trigger the FBC problem,
except it will make applications compiled with a newer version of the
system, using newer features, not run on an older version of the system
—which is to be expected in any system.</span>”
</p></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id596061"></a>Subject: GUI Dreams</h4></div></div></div><p>
User Interface talk: Alexander Stigsen has been thinking about the
principles behind an ideal interface. The keyword is configurability:
Nearly every element of the UI should be user-definable. Mr. Stigsen
breaks the UI world into two hemispheres: Desktop UI and Application
UI, and says of them:
</p><p>
“<span class="quote">It should be possible to totally customize all the system elements of
the desktop... It should be possible for the user to totally customize
the GUI of every individual application on his/hers system.</span>”
</p><p>
Comments? Plenty. Jay O'Conor pointed out an obvious problem of
ultra-configurability:
</p><p>
“<span class="quote">Documentation, ease of learning, usability, support, are all areas
that suffer when an interface is too configurable... Appearances are
generally ok to customize, as this effects only the 'look' of an
interface, not the 'feel'. How the interface operates (feels) should
remain consistent.</span>”
</p></div></div></div></div><div id="footer"><hr /><div id="footerT">Prev: <a href="Issue2-41.html">Issue 2-41, October 15, 1997</a>  Up: <a href="volume2.html">Volume 2: 1997</a>  Next: <a href="Issue2-43.html">Issue 2-43, October 29, 1997</a> </div><div id="footerB"><div id="footerBL"><a href="Issue2-41.html" title="Issue 2-41, October 15, 1997"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a href="volume2.html" title="Volume 2: 1997"><img src="./images/navigation/up.png" alt="Up" /></a> <a href="Issue2-43.html" title="Issue 2-43, October 29, 1997"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="footerBR"><div><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div></div><div id="footerBC"><a href="http://www.access-company.com/home.html" title="ACCESS Co."><img alt="Access Company" src="./images/access_logo.png" /></a></div></div></div><div id="licenseFooter"><div id="licenseFooterBL"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/" title="Creative Commons License"><img alt="Creative Commons License" style="border-width:0" src="https://licensebuttons.net/l/by-nc-nd/3.0/88x31.png" /></a></div><div id="licenseFooterBR"><a href="./LegalNotice.html">Legal Notice</a></div><div id="licenseFooterBC"><span id="licenseText">This work is licensed under a
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative
          Commons Attribution-Non commercial-No Derivative Works 3.0 License</a>.</span></div></div></body></html>
