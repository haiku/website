<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Be Newsletters - Volume 1: 1995–1996</title><link rel="stylesheet" href="be_newsletter.css" type="text/css" media="all" /><link rel="shortcut icon" type="image/vnd.microsoft.icon" href="./images/favicon.ico" /><!--[if IE]>
    <link rel="stylesheet" type="text/css" href="be_newsletter_ie.css" />
    <![endif]--><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="start" href="index.html" title="Be Newsletters" /><link rel="up" href="volume1.html" title="Volume 1: 1995–1996" /><link rel="prev" href="Issue1-52.html" title="Issue 1-52, December 4, 1996" /><link rel="next" href="Issue1-54.html" title="Issue 1-54, December 18, 1996" /></head><body><div id="header"><div id="headerT"><div id="headerTL"><a accesskey="p" href="Issue1-52.html" title="Issue 1-52, December 4, 1996"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a accesskey="u" href="volume1.html" title="Volume 1: 1995–1996"><img src="./images/navigation/up.png" alt="Up" /></a> <a accesskey="n" href="Issue1-54.html" title="Issue 1-54, December 18, 1996"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="headerTR"><div id="navigpeople"><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div><div class="navigboxed" id="naviglang" title="English">en</div></div><div id="headerTC">Be Newsletters - Volume 1: 1995–1996</div></div><div id="headerB">Prev: <a href="Issue1-52.html">Issue 1-52, December 4, 1996</a>  Up: <a href="volume1.html">Volume 1: 1995–1996</a>  Next: <a href="Issue1-54.html">Issue 1-54, December 18, 1996</a></div><hr /></div><div class="article"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Issue1-53"></a>Issue 1-53, December 11, 1996</h2></div></div></div><div class="sect1"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Support1-53"></a>Newsletter First Anniversary</h2></div><div xmlns:d="http://docbook.org/ns/docbook"><span xmlns="http://www.w3.org/1999/xhtml" class="author">By <span class="firstname">Valérie</span> <span class="surname">Peyre</span></span></div></div></div><p>The Be Newsletter celebrates its first anniversary this week. This gives
me the opportunity to thank all those at Be and in the developer
community who have contributed to the Newsletter, and to reflect on how
things have changed in the last year...
</p><p>1996 was an exciting year at Be - The company has grown really fast and
has gained in popularity. We've done our best, through the Newsletter, to
keep pace and to communicate the growing interest—by adding new
columns, finding interesting developers to profile, and letting you know
where we are and what we're doing.
</p><p>But throughout this excitement, we've tried to keep the Newsletter
focused on its primary goal: To keep our *developers* informed about Be,
the BeOS, and what some people call the "Be Philosophy."
</p><p>Developers are important to us—yes, I know, you've heard that before.
But this is the reality: Our developers are our future. This doesn't mean
that we're passively waiting for you to do all the work of developing
great applications. Rather, we want to earn your trust—in our product
and our support—so that you'll continue to develop on the BeOS. In
addition to providing technical and marketing support for your efforts,
we'll also listen to (and incorporate) your suggestions for improvements
to the OS.
</p><p>It's our hope that the Newsletter has been part of the exchange of ideas
that has helped Be grow. Since the first issue a year ago, we've
encouraged you to speak about your work and your experiences with the
BeBox. Some of you have been profiled in the Developer Profile column in
the last year—we hope to hear from even more of you soon. If you
haven't contributed an article yet, consider this:
</p><p>On December 6, 1995, the first Be Newsletter—in hardcopy—was
printed and mailed to about 300 people. One year later, we send out our
weekly online Newsletter to 8000 Be subscribers (Forty percent of them
are registered Be Developers). Plus, we count something between 3000 and
5000 Newsletter hits on our website every week...and the numbers are
growing. So, please, send us information to publish your profile.
</p><p>To conclude, I will let you know that the Be Newsletter is a %100 percent
internal product, and has been a real team effort. Okay—it's not
always easy to get an engineering team to write every week...believe me,
some of them have shown great imagination in trying to avoid their
assignments—chronic amnesia, religious holidays, flowers, lunch—but
they've all done a great job. Thanks guys!
</p><p>Thanks also to all the regular columnists (Jean-Louis, Alex, William,
Doug).Two people have been especially helpful: Doug fulton, who has done
incredible work summarizing BeDevTalk every week and editing sections of
the Newsletter in his own unique style, and Roy West who has also done a
lot of very good work with his weekly editing.
</p><p>I hope the Be Newsletter will continue to serve and inform all of you. If
you have any comments, please feel free to send them to newsletter@be.com.
</p></div><hr class="pagebreak" /><div class="sect1"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Engineering1-53"></a>Be Engineering Insights: The Compute-Bound Be Application</h2></div><div xmlns:d="http://docbook.org/ns/docbook"><span xmlns="http://www.w3.org/1999/xhtml" class="author">By <span class="firstname">Rico</span> <span class="surname">Tudor</span></span></div></div></div><p>One of the hardest aspects of BeOS programming is making use of multiple
processors within one application. To coax N CPUs to work for you, the
BeApp must create at least N flows- of-control (threads), and keep them
busy. Once created, a thread that wants to run will be allocated an
available CPU by the BeOS kernel. The trick is factoring a problem into
such threads. For full-screen games, this has been discussed recently by
Pierre's fine article "A Typical Multithreaded Game Architecture".
</p><p>This article discusses compute-bound programs in general, even if they
have no graphics component. While BeOS provides a Posix environment,
threads are not available: multiple threads are, formally speaking, a
feature of the BeOS kernel and the Kits. Therefore, a BeApp is required
to maximize CPU usage.
</p><p>A toy version of the Mandelbrot app is included for illustration.
</p><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id510922"></a>The Problem</h3></div></div></div><p>Assuming that your problem is well-defined, the first step is determining
an algorithm. In a uni-processor system, sequential algorithms will
suffice. In the multi-processor BeBox, this is usually sub-optimal; the
desirable algorithm will be parallel. Unfortunately, such an algorithm
may be difficult to write, difficult to find, or may not even exist.
</p><p>A simple example is the binary search, which involves successive
comparisons from a sorted array. The next element to compare depends on
the result of the previous comparison, ruling out a parallel approach.
</p><p>Another example is the alpha-beta tree search algorithm, used by
complete-information games like chess. If a brute-force search visits N
leaves in the tree, the alpha-beta search can visit as few as sqrt(N).
This staggering improvement is achieved because certain branches are
ignored, based on earlier search results. To compete, the brute-force
algorithm would need sqrt(N) more CPUs, currently unavailable in the
BeBox product line.
</p><p>Note that while the search examples above are resistant to parallel
processing, you can perform two separate searches in parallel. This is
the key to multi-threaded programming: factoring the problem into
UNRELATED parts. Unrelated means there is no interaction, except at the
beginning or end.
</p><p>Fortunately, many problems are inherently parallel. Scientific and
statistical modeling often involves large numbers of independent
calculations on particles, waves, pixels, bank accounts, etc. This is the
easiest problem to factor, since you write one piece of code and then
invoke it, in parallel, on each piece of data.
</p><p>A second, more difficult, approach is possible. If the calculations are
not independent, you can form a "pipeline" of computation, where data
flows from one stage to the next. Each stage grinds on the data in a
particular way. Mother Nature has chosen this approach for the alimentary
canal. The challenge is to design each stage such that the workload is
reasonably balanced, meaning that all CPUs are in use at all times. Since
each stage is itself sequential, no stage should be disproportionately
compute-intensive; data should be delivered in manageably small
increments. A good design will avoid constipation, and requires the
programmer's gut feeling as much as science. The handy Pulse app provides
a diagnosis.
</p><p>Given space restrictions, this article will avoid the second approach.
The Mandelbrot app is an example of the first approach: each point in the
Mandelbrot set can be calculated independently of the others. Note that
the calculations for a given point must be sequential.
</p></div><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id510986"></a>The Approach</h3></div></div></div><p>It is desirable that a long computation be divided into a sequence of
short ones. This allows the computation to be aborted, allows progress
reports, and changing parameters on- the-fly. Some problems, like
Mandelbrot, divide naturally.
</p><p>In most programming circles, polling is a dirty word. It conveys the
image of a CPU spinning single-mindedly in a loop, flying in the face of
the modern GUI and the modern multi-tasking OS. Nonetheless, the essence
of digital computation is the poll: if the hardware isn't polling, it's
the kernel; if not the kernel, then the Kits. When you write
compute-bound code, you are polling, too.
</p><p>Polling may have an explicit form, such as checking the amount of time
expended, or it may be implicit, such as counting the number of results
accumulated.
</p><p>In one style of programming, the poll appears in the code as a function
call, e.g. to get the time, or deliver some results. The return value may
specify new parameters, or an indication to abort. In event-driven
programming, the poll appears as a return from the event handling
function. New parameters are supplied by the next invocation of the
handler; If the calculation is aborted, the handler is simply not called.
</p><p>To demonstrate the power of the Application Kit, Mandelbrot uses the
event-driven style. The polling is implicit: one scanline is calculated
and displayed.
</p></div><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id511034"></a>The Code</h3></div></div></div><p>Mandelbrot does a lot in 110 lines of code, thanks to the powerful
Application Kit. Threads are harnessed by BLoopers, while BMessages
provide synchronization and communication between BLoopers. No other
facilities are required.
</p><pre class="programlisting cpp">
#include        &lt;Application.h&gt;
#include        &lt;Bitmap.h&gt;
#include        &lt;unistd.h&gt;
#include        &lt;string.h&gt;
#include        &lt;stdlib.h&gt;
#include        &lt;stdio.h&gt;

#define <code class="constant">YMAX</code>    600
#define <code class="constant">XMAX</code>    800
#define <code class="constant">NLOOPER</code> 2
#define <code class="constant">N</code>       500
#define <code class="constant">XBASE</code>   -.166025425237824
#define <code class="constant">YBASE</code>   -.651236716536372
#define <code class="constant">XLEN</code>    .003661029815804
#define <code class="constant">YLEN</code>    .003044479089232

static <span class="type">uchar</span> <code class="varname">ctab</code>[] = {
         0, 8, 9,10,11,12,13,14,15,16,17,18,19,20,21,22,
        23,24,25,26,27,28,29,30,63,30,29,28,27,26,25,24,
        23,22,21,20,19,18,17,16,15,14,13,12,11,10, 9, 8,
};
struct <span class="type">L</span>: <code class="classname">BLooper</code> {
        L( <code class="classname">BView</code> *<code class="parameter">view</code>, <span class="type">uint</span> <code class="parameter">i</code>) {
                <code class="varname">v</code> = <code class="parameter">view</code>;
                <code class="varname">id</code> = <code class="parameter">i</code>;
                <code class="methodname">Run</code>( );
        }
        <span class="type">void</span> <code class="methodname">MessageReceived</code>( <code class="classname">BMessage</code> *<code class="parameter">m</code>) {
                switch (<code class="parameter">m</code>-&gt;<code class="varname">what</code>) {
                case 'calc':
                        <code class="methodname">DetachCurrentMessage</code>( );
                        <code class="methodname">calc</code>( <code class="parameter">m</code>-&gt;<code class="methodname">FindLong</code>( "y"));
                        <code class="varname">v</code>-&gt;<code class="methodname">Window</code>( )-&gt;<code class="methodname">PostMessage</code>( <code class="parameter">m</code>, <code class="varname">v</code>);
                }
        };
        <span class="type">void</span> <code class="methodname">calc</code>( <span class="type">uint</span> <code class="parameter">ycur</code>) {
                for (<span class="type">uint</span> <code class="varname">xcur</code>=0; <code class="varname">xcur</code>&lt;<code class="constant">XMAX</code>; ++<code class="varname">xcur</code>) {
                        <span class="type">constdouble</span> <code class="varname">a</code> = <code class="constant">XBASE</code> + <code class="varname">xcur</code>*<code class="constant">XLEN</code>/<code class="constant">XMAX</code>;
                        <span class="type">constdouble</span> <code class="varname">b</code> = <code class="constant">YBASE</code> + <code class="varname">ycur</code>*<code class="constant">YLEN</code>/<code class="constant">YMAX</code>;
                        <span class="type">double</span> <code class="varname">x</code> = 0;
                        <span class="type">double</span> <code class="varname">y</code> = 0;
                        <span class="type">uint</span> <code class="varname">i</code> = 0;
                        while ((<code class="varname">x</code>*<code class="varname">x</code>+<code class="varname">y</code>*<code class="varname">y</code> &lt; 4)
                        &amp;&amp; (++<code class="varname">i</code> &lt; <code class="constant">N</code>)) {
                                <span class="type">double</span> <code class="varname">newx</code> = <code class="varname">x</code>*<code class="varname">x</code> - <code class="varname">y</code>*<code class="varname">y</code> + <code class="varname">a</code>;
                                <code class="varname">y</code> = 2*<code class="varname">x</code>*<code class="varname">y</code> + <code class="varname">b</code>;
                                <code class="varname">x</code> = <code class="varname">newx</code>;
                        }
                        <code class="varname">results</code>[<code class="varname">xcur</code>] = <code class="varname">ctab</code>[(<code class="constant">N</code>-<code class="varname">i</code>)%sizeof(<code class="varname">ctab</code>)];
                }
        }
        <code class="classname">BView</code>   *<code class="varname">v</code>;
        <span class="type">uint</span>    <code class="varname">id</code>;
        <span class="type">uchar</span>   <code class="varname">results</code>[<code class="constant">XMAX</code>];
};
struct <span class="type">V</span>: <code class="classname">BView</code>, <code class="classname">BBitmap</code> {
        <span class="type">V</span>( <code class="classname">BRect</code> <code class="parameter">r</code>): <code class="classname">BView</code>( <code class="parameter">r</code>, 0, <code class="constant">B_FOLLOW_ALL</code>, <code class="constant">B_WILL_DRAW</code>),
                <code class="classname">BBitmap</code>( r, <code class="constant">B_COLOR_8_BIT</code>) { }
        <span class="type">void</span> <code class="methodname">AttachedToWindow</code>( ) {
                <code class="varname">ycur</code> = 0;
                for (<span class="type">uint</span> <code class="varname">i</code>=0; <code class="varname">i</code>&lt;<code class="constant">NLOOPER</code>; ++<code class="varname">i</code>)
                        <code class="methodname">startcalc</code>( new <span class="type">L</span>( <code class="varname">this</code>, <code class="varname">i</code>));
        }
        <span class="type">void</span> <code class="methodname">MessageReceived</code>( <code class="classname">BMessage</code> *<code class="parameter">m</code>) {
                if (<code class="parameter">m</code>-&gt;<code class="varname">what</code> == 'calc') {
                        <span class="type">L</span> *<code class="varname">l</code> = (<span class="type">L *</span>) <code class="parameter">m</code>-&gt;<code class="methodname">FindLong</code>( "l");
                        <code class="methodname">display</code>( <code class="parameter">m</code>-&gt;<code class="methodname">FindLong</code>( "y"), <code class="varname">l</code>);
                        <code class="methodname">startcalc</code>( <code class="varname">l</code>);
                }
        };
        <span class="type">void</span> <code class="methodname">startcalc</code>( <span class="type">L *</span><code class="parameter">l</code>) {
                if (<code class="varname">ycur</code> &lt; <code class="constant">YMAX</code>) {
                        <code class="classname">BMessage</code> *<code class="varname">m</code> = new <code class="classname">BMessage</code>( 'calc');
                        <code class="varname">m</code>-&gt;<code class="methodname">AddLong</code>( "l", (<span class="type">long</span>)<code class="varname">l</code>);
                        <code class="varname">m</code>-&gt;<code class="methodname">AddLong</code>( "y", <code class="varname">ycur</code>++);
                        <code class="parameter">l</code>-&gt;<code class="methodname">PostMessage</code>( <code class="varname">m</code>);
                }
        }
        <span class="type">void</span> <code class="methodname">Draw</code>( <code class="classname">BRect</code>) {
                <code class="methodname">DrawBitmap</code>( <code class="varname">this</code>, <code class="classname">BPoint</code>( 0, 0));
        }
        <span class="type">void</span> <code class="methodname">display</code>( <span class="type">uint</span> <code class="parameter">y</code>, <span class="type">L</span> *<code class="parameter">l</code>) {
                for (<span class="type">uint</span> <code class="varname">i</code>=0; <code class="varname">i</code>&lt;10; ++<code class="varname">i</code>)
                        <code class="parameter">l</code>-&gt;<code class="varname">results</code>[<code class="varname">i</code>] = <code class="parameter">l</code>-&gt;<code class="varname">id</code> * 63;
                <code class="methodname">SetBits</code>( <code class="parameter">l</code>-&gt;<code class="varname">results</code>, <code class="constant">XMAX</code>, <code class="varname">y</code>*<code class="constant">XMAX</code>,<code class="constant">B_COLOR_8_BIT</code>);
                <code class="classname">BRect</code> <code class="varname">r</code>( 0, <code class="parameter">y</code>, <code class="constant">XMAX</code>-1, <code class="parameter">y</code>);
                <code class="methodname">DrawBitmap</code>( <code class="varname">this</code>, <code class="parameter">r</code>, <code class="parameter">r</code>);
        }
        <span class="type">uint</span>    <code class="varname">ycur</code>;
};
struct <span class="type">W</span>: <code class="classname">BWindow</code> {
        W( <code class="classname">BRect</code> <code class="parameter">r</code>): <code class="classname">BWindow</code>( <code class="parameter">r</code>, "m", <code class="constant">B_TITLED_WINDOW</code>, <code class="constant">B_NOT_CLOSABLE</code>) {
                <code class="methodname">MoveBy</code>( 5, 0);
                <code class="methodname">Show</code>( );
                <code class="methodname">AddChild</code>( new <code class="classname">V</code>( <code class="parameter">r</code>));
        }
};
struct <code class="classname">A</code>: <code class="classname">BApplication</code> {
        <code class="classname">A</code>( ): <code class="classname">BApplication</code>( 'abcd') {
                <code class="methodname">Run</code>( );
        }
        <span class="type">void</span> <code class="methodname">ReadyToRun</code>( ) {
                new <code class="classname">W</code>( <code class="classname">BRect</code>( 0, 0, <code class="constant">XMAX</code>-1, <code class="constant">YMAX</code>-1));
        }
};
<code class="function">main</code>( )
{
        <code class="classname">A</code> <code class="varname">a</code>;
        return (0);
}
</pre></div><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id511906"></a>Explanation Of The Code</h3></div></div></div><p>The Mandelbrot team consists of four threads, all of them derived
<code class="classname">BLoopers</code>: <code class="classname">BApplication</code> <code class="classname">A</code>,
<code class="classname">BWindow</code> <code class="classname">W</code>, and two <code class="classname">L</code> <code class="classname">BLooper</code>s.
Note that <code class="classname">BView</code>
<code class="classname">V</code>, while being its own <code class="classname">BObject</code>, is operated by <code class="classname">W</code>.
</p><p>The <code class="classname">L</code> code does all the grinding. By changing the <code class="constant">NLOOPER</code> constant to 1,
you can observe how only one <acronym class="acronym">CPU</acronym> is working. If <code class="constant">NLOOPER</code> is larger than
the number of <acronym class="acronym">CPU</acronym>s, no further gains are achieved.
</p><p>While the <code class="classname">L</code> loopers are grinding, the <code class="classname">A</code> looper responds immediately if
the user pulls down the app menu. Similarly, the <code class="classname">W</code> looper can redraw the
window immediately while the user drags it around.
</p><p>The <code class="classname">V</code> view is the coordinator of the enterprise. It directs the
computations, scanline at a time, to each <code class="classname">L</code> looper.
To indicate how <code class="classname">V</code> is
dividing the work, the particular <code class="classname">L</code> looper's signature is drawn on the
left edge of the scanline. <code class="classname">V</code> accesses the calculation results directly
from each <code class="classname">L</code>. This data sharing between loopers must be conducted with
care. If the data quantity is small or infrequently shared, it should be
passed using a <code class="classname">BMessage</code>. Sharing becomes more dangerous as program
complexity grows.
</p><p>On a dual 66 MHz BeBox, the app runs at 8 scanlines per second. If the
polling rate is too high, efficiency will deteriorate. If the rate is too
low, the responsiveness of <code class="classname">L</code> will suffer. Changing
<code class="constant">N</code>, <code class="constant">XBASE</code>, <code class="constant">YBASE</code>, <code class="constant">XLEN</code>,
or <code class="constant">YLEN</code> can drastically alter the polling rate. The program does not
address this important issue: a general Mandelbrot app needs a flexible
polling method. A workable implicit method is to count the iterations of
the inner loop, instead of calculating the whole scanline. The explicit
method could use the astonishingly efficient <code class="function">system_time()</code> function.
Cost: 1 microsecond per call!
</p><p>Flexible polling requires more programming work. It must be possible to
start and stop work in the middle of the scanline. The housekeeping would
occur in the <code class="classname">V</code> view.
</p></div><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512088"></a>Hacking The Code</h3></div></div></div><p>For thrill-seekers, certain constants control the image appearance. The
Mandelbrot set is defined for real x and y, where -2 &lt; x &lt; 2 and -2 &lt; y &lt;
2. Much of this area is featureless, so you want to zoom in by changing
<code class="constant">XBASE</code>, <code class="constant">YBASE</code>, <code class="constant">XLEN</code>
and <code class="constant">YLEN</code>, such that <code class="constant">XBASE</code> &lt; x &lt;
<code class="constant">XBASE</code>+<code class="constant">XLEN</code> and <code class="constant">YBASE</code> &lt;
y &lt; <code class="constant">YBASE</code>+<code class="constant">YLEN</code>. The distinguishing
behavior of the Mandelbrot set is the
infinite detail as you zoom. With sufficient magnification, you can
observe the demise of floating-point precision. A fancy version of this
program should allow zooming with the mouse.
</p><p>The constant <code class="constant">N</code> determines the amount of detail: detail requires more
compute time. More detail does not always produce an aesthetic image,
since the clutter is distracting.
</p><p><code class="constant">XMAX</code> and <code class="constant">YMAX</code> determine the image size, in pixels. The fancy program
should allow the user to set the values, by way of the resize icon.
</p><p>A different way to control the image appearance is through the colormap,
<code class="varname">ctab</code>[]. The grayscale can be replaced with your favorite colorscale, or
something random. Colormaps can radically alter the appearance of the
same bits, with no further calculations.
</p></div><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512177"></a>Conclusion</h3></div></div></div><p>BeOS provides numerous low-level synchronization facilities for threads.
Most notable are semaphores and message ports, both in the Kernel Kit.
While these are fast, compute-bound threads still require the programmer
to address the polling issue.
</p><p>The Application Kit has the advantage of offering a comfortable
environment, with services like sound and graphics from the other Kits.
Unless the polling rate is high, a few hundred Hz, the overhead of the
slower Application Kit is not a concern.
</p></div></div><hr class="pagebreak" /><div class="sect1"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Engineering1-53-2"></a>Be Engineering Insights: Hardware Repair Forum</h2></div><div xmlns:d="http://docbook.org/ns/docbook"><span xmlns="http://www.w3.org/1999/xhtml" class="author">By <span class="firstname">Mike</span> <span class="surname">Palmer</span></span></div></div></div><p>Enough BeBoxes have gone out that we occasionally see one come back in
for service. Some of these returned units may actually be end-user
servicable, such as pressing the ASICs down in their sockets to reseat
them after they popped up due to thermal cycling. Other problems may not
be so easy to fix. For example, flash technology is ideal for changing
ROM data in circuit, but the devices themselves are frail. When a system
is powered up, but doesn't boot, (either the load indicator LEDS never
turn off or the BE logo never appears or the boot doesn't proceed past
the BE logo), the cause is a failed flashrom device. Reprogramming it
will not work; it needs to be replaced. Usually if a system doesn't boot
up all the way, it's the flashrom.
</p><p>If after booting there is random video data on the screen, the flashrom
is of a different firmware release from the startup disk. Both need to be
at the same release level, currently DR8.1 at least, although the disk
may contain DR8.2 now. Upgrading the flashrom/disk solves this problem.
</p><p>If the PS/2 mouse hangs, check whether a user installed card is using
IRQ12. The mouse needs IRQ12. The solution here is to re-configure the
card to use a different IRQ; if the card is hardwired to IRQ12, get a
configurable card. Also, in the case of a non-working mouse, check for a
blown 2A fuse at F2 on the motherboard.
</p><p>This about does it for problems that an end-user can diagnose and fix.
However, if your BeBox fails for any reason, and YOU can't fix it, call
us! Seeing all the different failure modes only helps our engineering
effort to make more robust BeBoxes in the future. We will make sure when
we get your BeBox here to repair it using the same tests and components
as in the manufacturing process. Many times a failure can be traced to a
defective component.
</p><p>So, once again, if your BeBox goes down, let us know and we'll get it
right back up.
</p><p>Happy Computing!
</p></div><hr class="pagebreak" /><div class="sect1"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="DevProfile1-53"></a>Be Developer Talk: Jos Van Roosmalen</h2></div><div xmlns:d="http://docbook.org/ns/docbook"><span xmlns="http://www.w3.org/1999/xhtml" class="author">By <span class="firstname">Jos</span> <span class="surname">van Roosmalen</span></span></div></div></div><p>I like multiprocessor hardware. My first experience with a MP computer
was the Atari Transputer Workstation (26 Inmos RISC T800 @ 20 MHz), which
I got when Atari closed its European Distribution Center in The
Netherlands. The ATW is running Helios OS, a UNIX/X-like OS-enviroment
designed for multiple processors that was developed by Perihelion
Software. I like the ATW—and love the power of multiple processors --
but because there are only 30 Transputer Workstations in the world, I
figured it was time to move to a new platform. So I bought a BeBox.
</p><p>At the 'BeBox/BeOS' demo in Amsterdam last month, a lot of people asked
me what word processor I was using on the BeBox. I was asked this so many
times, that I decided to port my own. The application is being beta
tested now, and should be available as shareware by the beginning of the
new year. The fully-featured commercial version of the word processor
should be ready sometime in 1997. I hope you'll be pleased with the app,
and, just as important, delighted by the price: my commercial software
will be priced to move!
</p><p>In addition to work on the word processor, I'm also finishing some
applications that I hope will be ready by the time PowerComputing starts
shipping the BeOS on its machines. I'll announce some of these
application this week: For example,you'll see a spread sheet and a
project codenamed "BeMedia." A lot of this software was already running
on the Atari, and it's been quite easy to port to the BeOS.
</p><p>To help promote, sell, and support these applications, I started a new
company that uses the Internet as its primary marketing channel. As Be
itself has shown, the Internet is a powerful—and low-cost—medium
for getting the word out. My company's Web site will be opened when the
first commercial products are available; until then, keep your eye on my
own home page:
</p><p>http://www.stack.nl/~josr.
</p><p>Coding software for the BeOS is easy! Because of its object orientation
and software kits, you don't need to know all the wearying details of the
OS. Of course, other environments—Windows NT, in particular—let you
code in C++, but the communication between the OS and your application is
from the last decade. The BeOS shows us how to design software for the
future.
</p><p>For questions, etcetera: E-mail: josr@stack.nl
</p></div><hr class="pagebreak" /><div class="sect1"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="News1-53"></a>News From The Front</h2></div><div xmlns:d="http://docbook.org/ns/docbook"><span xmlns="http://www.w3.org/1999/xhtml" class="author">By <span class="firstname">William</span> <span class="surname">Adams</span></span></div></div></div><p>Playing with a 19-month-old is a lot of fun. Almost anything you do will
bring screams of delight. Just the other night Yasmin and I were doing
this on our bed:
</p><div class="blockquote"><blockquote class="blockquote"><p>"Watch this, fall down, boink!  Hee, heee, heeee!"
</p></blockquote></div><p>On and on it went for at least 10 minutes. Falling down is fun. But some
day she's going to grow out of it; she'll discover that running without
falling covers more ground.
</p><p>We often say that the BeOS is still in its infancy. Our patient
developers, who are no doubt having fun, will eventually get tired of
falling. One particularly bumpy path is device driver development.
</p><p>You've also no doubt heard (again and again) our battle cry of "Raid the
PC Organ Bank!" We support standard PCI-based video, we have on-board
SCSI 2, and we have ISA slots. Given this environment the BeBox is a
ready recipient for many of the inexpensive PC organs found at computer
mega stores. But, in order to prevent rejection, someone must smooth the
path by convincing the BeOS that the new device isn't an invading antigen
that must be surrounded and destroyed.
</p><p>This is the job of the device driver writer.
</p><p>If you've ever written a device driver for a video card, you'll
understand what a hassle it can be. As was spelled out a few newsletters
ago by Pierre, it's a difficult process even when you have all the
information that you need. Currently, one of the most annoying bumps when
you're developing a video driver is that you must put your driver on a
floppy and reboot your machine every time you make a change. If your
driver doesn't work, you *might* be able to debug it over the serial port
—but you're flying blind because son, you just done smashed your video.
</p><p>Is there a better way? Why, yes.
</p><p>A few newsletters back we threatened to provide you with some tools to
help in this process. They're ready; come and get them:
</p><p>ftp://ftp.be.com/pub/Samples/vidtest.tgz
</p><p>What you'll find is a test harness that will exercise your budding video
driver while you are still looking at a clean UI. It does this by letting
you plug two video cards into your BeBox. Mind you, there are all sorts
of caveats to doing this correctly; for example:
</p><ul class="itemizedlist"><li><p>The card you are writing for must not conflict with your primary
board. This is particularly nasty if both boards use memory mapped I/O
from the ISA bus. There will definitely be conflicts.
</p></li><li><p>You need a second monitor or a switchbox.
</p></li></ul><p>There are instructions for usage in the package. This test harness is
used to test the IMS graphics board on the Mac, so it does have some
value.
</p><p>Another area of particular pain is the production of drivers for SCSI
devices. Robert Polic, creator of SCSIProbe and other critical parts of
the BeOS, has put up the source for the SCSIProbe driver for those
intrepid souls who dare to tread in this territory:
</p><p>ftp://ftp.be.com/pub/Samples/scsi.tgz
</p><p>The sample source should go a long way toward helping you create a SCSI
device driver of your own. The code is very clean and documented.
Together with the device driver documentation, you should be on your way.
</p><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512508"></a>On To The Show</h3></div></div></div><p>Boom, Boom, BOOM! Hear that? 20 some odd days left until the Big Event.
We will have a modest sized booth at MacWorld this year. There will be 4
workstations available for showing your wares. What we want to do is show
as many of your apps as possible, so get them ready. Send us your best
and we'll do the rest. If you are actually attending the show and want to
do some booth duty to show your own app, drop us a line and we'll make
you a star.
</p><p>Be will also be demonstrating in the PowerComputing booth. Again,
applications that show off the BeOS is what we'd like to show. Our own
demo apps are great—that's what has excited so many people—but the
show will be even better if we can show the applications of third-party
developers who actually want to ship a product. And I'm sure that there
will be many visitors anxious to see what's possible on a Macintosh
running an OS for the 90's.
</p></div><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512537"></a>Conclusions</h3></div></div></div><p>The year is rapidly coming to a close. The Be demo tour is over for now.
The world, or at least Silicon Valley, seems to know Be Inc. exists. We
made it through infancy, and are beginning our toddler phase. With more
support from your friendly DTS staff, and more applications from hard
working developers, it seems like this child will grow to adolescence.
This will be a good thing, and we should all look forward to what is sure
to be a fun, exciting, and profitable time ahead.
</p></div></div><hr class="pagebreak" /><div class="sect1"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="Gassee1-53"></a>One Year</h2></div><div xmlns:d="http://docbook.org/ns/docbook"><span xmlns="http://www.w3.org/1999/xhtml" class="author">By <span class="firstname">Jean-Louis</span> <span class="surname">Gassée</span></span></div></div></div><p>It was almost as lunatical as starting the company itself.
</p><p>Or so said some respected members of our engineering community.
</p><p>Who were we to publish a Be Newsletter (weekly, yet!) when we barely had
a product? Do we want to look like we had people lying around with
nothing better to do than pound the company chest through the keys on
their word processors?
</p><p>And when, a year older, we look back—we have to admit they were right.
</p><p>But the warm and overwhelming reception accorded our baby had taken us by
surprise. We were scrambling to put all our technical documentation on an
untested Web server (who's other major customer provided gifs of "Debi"
and "Nikki" for the trench-coated Net voyeur).
</p><p>We sweet-talked our suppliers, serenaded our contractors, and waltzed our
creditors in a mad dance to ship the first BeBoxen to developers. "We
came here to write code, not short stories", as one articulate (and
literate) individual put it.
</p><p>True. But to achieve critical mass, we needed to communicate our ideas --
what our product and our business was (and is) about—early and often.
</p><p>And who can better express the why and the how of what we do than the
very individuals who create it? I realize the limits of such a statement:
Real writers write better than engineers, or even evangelists and
marketeers (not to mention immigrant CEOs). But there are benefits in
persuading the horse to speak: It helps to calibrate the generative
process. It also produces a healthy deflation (when needed)—you may
think you're Gigli in the shower, but step up on stage...And, most
importantly, for a technically literate audience such as ours stylistic
brilliance and polish is less important than getting unfiltered, unspun
information directly from the individuals in charge.
</p><p>These first 52 issues of the Newsletter wouldn't have been possible
without the wits and patience demonstrated by Valérie Peyre. She has an
innate ability to extract articles from even the most obdurate
procrastinators while juggling her other assignments on the team.
Newsletter day (Tuesday) rarely finishes early, with Doug Fulton and Roy
West, writers by day, performing cosmetic surgery on our prose well into
the night. As the team expanded during 1996, especially after we finally
got recapitalized, we gained regular contributors such as Alex Osadzinski
and, more recently, William Adams.
</p><p>I hope you can sense that we enjoy presenting the Newsletter to you every
week. Putting together an alternative personal computing platform is an
adventure and we appreciate this vehicle. It allows us to share ideas at
a speed, cost, and in a style no other medium would allow. Thanks for
having read us this past year. With luck, the events ahead will make the
past 52 issues look tame by comparison.
</p></div><hr class="pagebreak" /><div class="sect1"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="BeDevTalk1-53"></a>BeDevTalk Summary</h2></div></div></div><p>BeDevTalk is an unmonitored discussion group in which technical
information is shared by Be developers and interested parties. In this
column, we summarize some of the active threads, listed by their subject
lines as they appear, verbatim, in the mail.
</p><p>To subscribe to BeDevTalk, visit the mailing list page on our web site:
http://www.be.com/aboutbe/mailinglists.html.
</p><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512678"></a>WEEK 3 (or 4?)</h3></div></div></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512684"></a>Subject: Scripting interface</h4></div><div xmlns:d="http://docbook.org/ns/docbook"><h5 xmlns="http://www.w3.org/1999/xhtml" class="subtitle">
AKA: Scripting Architecture<br />
AKA: Scripting API - For Public Comment
</h5></div></div></div><p>After disappearing for a week, the scripting thread sprang back to
life. Should Be define (or adopt) a scripting *language*, or merely a
scripting *interface* (i.e. message prototypes). A new player, IFF, was
introduced on the pro- language side. And ARexx seems to be making a
comeback.
</p><p>Just as folks started to tire of the subject, Jon Watte of MetroWerks
published his own scripting interface. Poke around in
http://www.metrowerks.com/news/ for more info.
</p></div></div><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512715"></a>WEEK 3</h3></div></div></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512721"></a>Subject: Better thread control</h4></div></div></div><p>More discussion of how to coax your application into waiting for more
than one event. It was pointed out that a <code class="function">select()</code>- style wait would
not only save threads, but would also make porting existing code a lot
easier. This was countered with the arguments that 1) threads aren't
all that expensive, and so don't need to be "saved", and 2) "porting"
should mean fitting existing algorithms into a new platform's native
flow control—in other words, get with the program or you'll end up
with expensive emulation layers. The counter-counter: The upper limit
on the number of threads is unarguably much much lower than that of the
number of different conditions a <code class="function">select()</code> can monitor. And as to
"porting cleanly," it was pointed out that Be has plenty of sops to
tradition (e.g. POSIX); is a generalized <code class="function">select()</code> too much more to ask
for?
</p><p>THE BE LINE: No it isn't—but don't expect it in DR9. We hope to have
fd-based <code class="function">select()</code> implemented
</p></div></div><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512758"></a>WEEK 2</h3></div></div></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512764"></a>Subject: Preferences and version numbers</h4></div></div></div><p>More on whether version strings should be (foremost) human- readable.
It was contended, with a code example, that version strings should be
written to the resource section of a file (in DR9-speak, this will be
an attribute), rather than embedding a string in an otherwise binary
file. It was pointed out that the resource approach does seem to
satisfy the condition of human-readability (or, at least, it doesn't
exclude the possibility).
</p></div></div><div class="sect2"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512784"></a>NEW</h3></div></div></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512790"></a>Subject: Accessing Preferences</h4></div><div xmlns:d="http://docbook.org/ns/docbook"><h5 xmlns="http://www.w3.org/1999/xhtml" class="subtitle">AKA: [HEY BE!] filetypes</h5></div></div></div><p>A vote for a Win95-style (preferences) Registry prompted much
discussion on how the system should store preference data, and how an
application can access it. Someone suggested a "Preferences Server"
that would monitor the preference settings and send messages to
interested apps. Also, where should preference values be stored?
(consensus: the database); and what format should they be kept in?
(consensus: probably a home-grown type/creator/version/etc structure).
</p></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512814"></a>Subject: BWindowScreen</h4></div></div></div><p>Should the graphics support include a text mode? The initial reaction
was less-than-encouraging, but a number of folks say "Why not? If it's
in the gfx card, bring it out to the screen." This led to a discussion
of Terminal's glories and faults. Most folks want line-wrapping.
</p><p>THE BE LINE: We probably won't do a "text mode driver" ourselves;
however, we will work on improving Terminal's performance.
</p></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512835"></a>Subject: Home and End keys, MW, or a key remapper</h4></div></div></div><p>An initial request for mappable key bindings in the MW IDE editor led
to a broader discussion of system-wide keyboard mappings.
</p></div><div class="sect3"><div xmlns="" xmlns:d="http://docbook.org/ns/docbook" class="titlepage"><div><div xmlns:d="http://docbook.org/ns/docbook"><h4 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="id512849"></a>Subject: Some minor enhancements</h4></div></div></div><p>Of the three feature requests proposed in the thread's initial message,
one piqued discussion: Should the system poll removable media (as it
does with the CD) or ask for an explicit mount(a la floppy)? Should the
methodology be consistent (i.e. either the CD changed to explicit
mount, or floppy changed to poll). For polling devices, should the
frequency be decreased—is the current poll too expensive?</p></div></div></div></div><div id="footer"><hr /><div id="footerT">Prev: <a href="Issue1-52.html">Issue 1-52, December 4, 1996</a>  Up: <a href="volume1.html">Volume 1: 1995–1996</a>  Next: <a href="Issue1-54.html">Issue 1-54, December 18, 1996</a> </div><div id="footerB"><div id="footerBL"><a href="Issue1-52.html" title="Issue 1-52, December 4, 1996"><img src="./images/navigation/prev.png" alt="Prev" /></a> <a href="volume1.html" title="Volume 1: 1995–1996"><img src="./images/navigation/up.png" alt="Up" /></a> <a href="Issue1-54.html" title="Issue 1-54, December 18, 1996"><img src="./images/navigation/next.png" alt="Next" /></a></div><div id="footerBR"><div><a href="http://www.haiku-os.org"><img src="./images/People_24.png" alt="haiku-os.org" title="Visit The Haiku Website" /></a></div><div class="navighome" title="Home"><a accesskey="h" href="index.html"><img src="./images/navigation/home.png" alt="Home" /></a></div></div><div id="footerBC"><a href="http://www.access-company.com/home.html" title="ACCESS Co."><img alt="Access Company" src="./images/access_logo.png" /></a></div></div></div><div id="licenseFooter"><div id="licenseFooterBL"><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/" title="Creative Commons License"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-nd/3.0/88x31.png" /></a></div><div id="licenseFooterBR"><a href="./LegalNotice.html">Legal Notice</a></div><div id="licenseFooterBC"><span id="licenseText">This work is licensed under a
          <a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/">Creative
          Commons Attribution-Non commercial-No Derivative Works 3.0 License</a>.</span></div></div></body></html>
