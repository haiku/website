+++
type = "article"
title = "Layered File System"
date = "2006-08-20T15:02:00.000Z"
tags = ["kernel", "storage", "file system"]
+++


    <div class="field field-type-text field-field-body">
      <div class="field-label">Body:&nbsp;</div>
    <div class="field-items">
            <div class="field-item odd">
                    <p>The ability to mount filesystem's directory structure 'over the top of' existing mounted filesystems would allow for a number of simplifications for Haiku users' systems.</p>

<h3>Details</h3>

<p>Traditionally mounting a filesystem on a specific directory results in the new filesystem 'overriding' the specified directory, effectively hiding the original directory's contents. This restriction could however be lifted, allowing for layered, or union, mounting of systems.</p>

<p>When mounting filesystems the system will keep an ordered list of mount points. When file/directory/etc access occurs the system will traverse the mount list attempting to find a matching filesystem object in each in turn. The first match found is the one on which the system will act. Therefore, if there are two (or more) matches for a specific object the system first on the mount list will be used.</p>

<p>If the operation being attempted is that of file creation the system should create the file on the first read-write system found.</p>

<h3>Usage</h3>

<p>For Haiku users the system would keep a user specific set of directories with which it could overlay the system directories. Eg, A user may desire management of their own font directory. This directory could be mounted during login over the system font directory, thus removing the need for management of separate search paths.</p>

<p>The system would allow much freedom in areas traditionally protected due to permission constraints also. For example, installation of new software for a specific user is generally a difficult operation without resorting to increased privileges. However with layered file systems a user would have a (possibly blank) application directory mounted over the system application directory. Again doing away with multiple search paths and keeping the system much more cohesive.</p>

<h3>Issues</h3>

<ul>
    <li>More specifics on handling of specific layers and filesystem operations?</li>
    <li>Does this system obfuscate the system internals where they are working adequately already?</li>
</ul>
        </div>
        </div>
</div>
  