+++
type = "article"
title = "Virtualizing Haiku in VirtualBox "
date = "2011-03-12T16:46:57.000Z"
tags = []
+++

Virtual instances of operating systems are perfect for all kinds of testing purposes that need to be done in a safe and isolated environment. Installing Haiku in a virtual machine is a solution for people who do not want to install it on their physical computers, but wish to become familiar with it.<br />
     
    This How-To guide will describe the process of running Haiku on virtual machine (VM) using VirtualBox 3.2 There are two ways it can be done– one is installing and running Haiku from CD-ROM image, which is similar to a physical instance. Ror convenience and time-saving purposes, the user may also use the already prepared VM hard disk image. The decision is left up to the user, although many people prefer VM image as it is easier to manage.<br />
For this tutorial we will be using an ISO image file - it can be obtained <a href="/get-haiku">here</a>. The VirtualBox virtualization software and installation manual can be downloaded from <a href="http://www.virtualbox.org/wiki/Downloads">here</a>.<br />

<!--more-->

<br />Go to section:<ul>
              <li>  <a href="#part_iso">Installing and running Haiku from an ISO image</a></li>
              <li>  <a href="#part_additional">Additional Steps</a></li>
              <li>  <a href="#part_customVESA">Custom VESA Resolutions</a></li>
              <li>  <a href="#part_trouble">Troubleshooting</a></li>
            </ul>
             <p><hr /></p>
            <h3 id="part_iso">Installing and running Haiku from an ISO image.</h3>
             
            The following guide will describe installation of Haiku with an ISO image on VirtualBox.
             
            <h5 id="part_creatingv">Step 1. Creating a virtual machine.</h5>
            After installing VirtualBox and downloading an ISO image, we can begin the installation process. Installing operating systems in VirtualBox consists of two parts - create a virtual machine and then configure it to run the desired guest system installation.<br />
             
            We begin, by clicking the icon <span class="button">New</span> (or pressing <span class="key">Ctrl</span> + <span class="key">N</span>):
             
            <br /><img  style="padding:12px"  alt="virtualBox's main window" src="/files/vbox_1.png"/><br />
             
            We need to specify what kind of guest operating system we are going to install. This is helpful in the pre-configuration of virtual machines – it applies default settings for supported OS’s. For Haiku, we are going to choose "<em>Other</em>" for operating system type and "<em>Other/Unknown</em>" for version:
             
            <br /><img style="padding:12px" alt="VM Name" src="/files/vbox_2.png"/><br />
             
            The next step is to define how much of the host’s physical memory we want to allocate for our virtual machine. This decision should be based on the amount of RAM the host has, but it is recommended to spend a minimum of 256MB of RAM to make it run smoothly. More memory can increase the performance of the VM, but too much can slow down the host, so there needs to be a balance between the VM and host machine resources:
             
            <br /><img style="padding:12px" alt="Memory" src="/files/vbox_3.png"/><br />
             
            After we have done that, we need to create a hard disk image, which is going to be stored on the physical drive, at the specified location. We choose <em>Create a virtual harddrive now</em> (if it is not selected already) and click <span class="button">Create</span>:
             
            <br /><img style="padding:12px" alt="virtual hard disk" src="/files/vbox_4.png"/><br />
                   
                    Choose VDI and click <span class="button">Next</span>.
                    <br /><img style="padding:11px" alt="Location and size" src="/files/vbox_5.png"><br />
                                   
            Here we can define how big the virtual hard disk should be. In most cases it is sufficient to use the default option, which is <em>Dynamically allocated</em>. This will allow the image file to grow as more content is saved in it, with no lack in functionality:
             
            <br /><img style="padding:12px" alt="Hard disk storage type" src="/files/vbox_6.png"/><br />
             
            The next slide will ask us for the location of the hard disk image file and the maximum size of the dynamically expanding file. Input the values and click <span class="button">Create</span>:
           
           <br /><img style="padding:12px" alt="Location and size" src="/files/vbox_7.png"/><br />
             
            <!--more-->
            <h5>Step 2. Configuring the virtual machine.</h5>
             
            Now we need to configure our new virtual machine:
			
			First, click on the Settings icon that appeared for our virtual machine.
             
            <br /><img  style="padding:12px"  alt="Settings on main menu" src="/files/vbox_8.png"/><br />
             
            The settings window allows the user to configure the hardware aspects of the virtual machine that the guest OS will be using.  First of all, we need to attach our ISO image with the Haiku installation to the virtual machine in the form of emulated CD-ROM drive. To do that, we choose <em>Storage </em>from the left panel, and then click on <em>Empty </em>in the <em>Storage Tree</em>. Then we click on the CD icon next to the CD/DVD Device drop-down list:
             
            <br /><img style="padding:12px"   alt="CD/DVD Device" src="/files/vbox_9.png"/><br />
             
            Now we click on <em>Choose a virtual CD/DVD disk file...</em>. In the new window we point to the location where we stored our Haiku ISO image and then click <span class="button">Open</span> to confirm. Here is what we will see after that:
             
            <br /><img style="padding:12px"   alt="Media manager" src="/files/vbox_10.png"/><br />
             
            After you are done with configuring, click <span class="button">OK</span> to go back to the main window.
            <!--more-->
            <h5>Step 3. Installing Haiku</h5>
             
            Hopefully, at this point everything is properly configured and we can run the Haiku installation. To do so, click the Start Icon (or Machine -&gt; Start) to run the virtual machine. After a few seconds Haiku's GUI should appear.<br />
             
            The installation itself is quite simple and does not differ really from a physical one (follow the guides <a href="/get-haiku/installation-guide">on this page</a> if you are not familiar with installing Haiku).<br />
DriveSetup should detect two devices, one is our CD-ROM (ISO) file and another is the “harddrive” we created earlier. All we need to do is select that drive, go to <em>Partitions -&gt; Format</em>, click on <em>Be File System</em> and continue the initialization. Then you use Installer from the Deskbar's appliction menu to install from the CD image to the big virtual harddrive.
             
            <br /><img  style="padding:12px" alt="Haiku's DriveSetup" src="/files/image11_0.png"/><br />
             
            And that’s it! Power off and go back to the "Storage" Settings. To prevent booting the ISO image at every bootup, select the ISO image, click on the CD icon to the right and choose <em>Remove Attachment</em>:

             <br /><img style="padding:12px" alt="Haiku's DriveSetup" src="/files/vbox_11.png"/><br />

            <!--more-->
          <p><br /><br /><hr /><br /><br /></p>
                   <h3 id="part_additional">Additional steps</h3>
            <!--more-->
            <h5>Additional Step 1. Configuring the virtual machine.</h5>
            There are a few settings that could be changed to improve performance of Haiku. Remember that you need to divide resources responsibly, depending on your host specification.<br />
             
            We begin by clicking on the Settings icon.
             
            <br /><img  style="padding:12px" alt="Settings on main menu" src="/files/vbox_12.png"/><br />
             
            The settings window allows the user to configure the hardware aspects of the virtual machine guest OS will be using.<br />
             
            One of the ways to increase performance is changing the video memory assigned to the virtual machine. On the left panel click Display tab, and move the first slider to the right, to increase the amount of memory assigned. This should allow the GUI to run more smoothly and be more responsive.  
             
            <br /><img  style="padding:12px"   alt="Display tab" src="/files/vbox_13.png"/><br />
			
			By default, mouse integration with the guest is disabled in VirtualBox. However, we can easily enable this convenient feature: <br />
			Go to the <em>System</em> tab under <em>Settings</em> and change <em>Pointing Device</em> to <em>USB Tablet</em>.
			
			<br /><img  style="padding:12px"   alt="unmount" src="/files/vbox_14.png"><br />
             
            After you are done with configuring, click <span class="button">OK</span> to go back to the main window.
			
			
            <!--more-->
            <h5>Additional Step 2. Adjusting window settings.</h5>
            One of the inconveniences users experience while using virtual machines is screen resolutions. By default, guest OS’s apply a big screen resolution, causing the windows to have scrolling bars on both sides to navigate in x-axis and y-axis. There are two solutions for that problem.<br />
             
            First solution is simply adjusting the screen resolution using tools built into system. In Haiku we can use the Screen preflet, which can be found under the Preferences menu. By changing the resolution the user will then notice that size of the VM window has now changed.
             
            <br /><img style="padding:12px" alt="Haiku's Screen Preflet" src="/files/image17.png"/><br />
            
            The other way is to resize the guest window through the host. While Virtual Guest Additions are available from HaikuDepot, there is no automatic window resizing support yet. However the user may use custom VESA resoultion as a workaround. <br />
			For example, type this in your host system:
            <pre class="terminal">VBoxManage setextradata "VM name" "CustomVideoMode1" "1400x1050x16"</pre>
			
            <!--more-->
            <p><br /><br /><hr /><br /><br /></p>

                    <h3 id="part_trouble">Troubleshooting</h3>
            <!--more-->
            <h5> 1. Haiku cannot connect to the internet</h5>
            There are some known issues with the network cards on VirtualBox virtual machines. The symptom is simply the inability to connect to other computers over the Internet. A solution to this problem is as follows:<br />
             
            Go to the settings of Haiku virtual machine (it needs to be shutdown first) and click <em>Network -> Advanced-> Adapter type -> Intel PRO/1000 MT</em>.  Accept changes by clicking <span class="button">OK</span>.
             
            <br /><img  style="padding:12px" alt="Intel PRO/100 MT" src="/files/vbox_15.png"/><br />
             
            Now the network services should be working properly.  
            <!--more-->
            <h5>2. The VirtualBox Guest Additions are incomplete</h5>
            The VirtualBox Guest Additions provide drivers for the guest system so it may communicate with the host with simpler protocols. This could be desirable as it will provide additional features such as shared clipboards. However, this is not a necessary component of a VM, and Haiku will run perfectly fine without or only the available limited Guest Additions installed. <br />
