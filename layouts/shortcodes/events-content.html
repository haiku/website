{{/*
Content files in Hugo can't use Go templates, so we need to put the logic in a shortcode.
*/}}

<div class="pull-right text-center" style="background-color: #e4ffde; padding: 20px 10px; margin: 0 0 20px 20px;">
	<a href="/contact/">
		<img src="/images/App_People_64.png"><br>
		Add your event here!
	</a>
</div>

<p>The table below shows upcoming Haiku-related events and conferences where Haiku is scheduled to have a presence, either in the form of a booth, a talk or both. For more information for any specific event, click on the corresponding link under the <strong>Name</strong> column.</p>

{{ $now := dateFormat "2006-01-02" .Site.LastChange }}

{{ $.Scratch.Add "haveCurrentEvents" 0 }}
{{ range .Site.Data.events.entries }}
	{{ if ge .end $now }}
		{{ $.Scratch.Add "haveCurrentEvents" 1 }}
	{{ end }}
{{ end }}

{{ if eq ($.Scratch.Get "haveCurrentEvents") 1 }}
<table class="table table-condensed table-responsive">
	<tr>
		<th>Name</th>
		<th>Dates</th>
		<th>Homepage</th>
		<th>Country</th>
	</tr>

{{ range .Site.Data.events.entries }}

  {{ if ge .end $now }}

	<tr>
		<td><a href="{{ .page }}">{{ .name }}</a></td>
		<td>{{ .start }} - {{ .end }}</td>
		<td><a href="{{ .homepage }}">{{ .homepage }}</a></td>
		<td>{{ .country }}</td>
	</tr>
	
	{{ end }}

{{ end }}

</table>
{{ else }}
<h2 class="text-center" style="color: #999;">No events available</h2>
{{ end }}

<div class="clearfix"></div>

<h3>Past Events</h3>

<table class="table table-condensed table-responsive">
	<tr>
		<th>Name</th>
		<th>Dates</th>
		<th>Homepage</th>
		<th>Country</th>
	</tr>

{{ range .Site.Data.events.entries }}

  {{ if lt .end $now }}

	<tr>
		<td><a href="{{ .page }}">{{ .name }}</a></td>
		<td>{{ .start }} - {{ .end }}</td>
		<td><a href="{{ .homepage }}">{{ .homepage }}</a></td>
		<td>{{ .country }}</td>
	</tr>
	
	{{ end }}

{{ end }}

</table>
